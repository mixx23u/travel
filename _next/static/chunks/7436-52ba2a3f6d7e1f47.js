!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6c39e4d3-62fa-48d2-9c22-7d169f7e346e",e._sentryDebugIdIdentifier="sentry-dbid-6c39e4d3-62fa-48d2-9c22-7d169f7e346e")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4191,7436],{93564:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n={src:"/_next/static/media/trip-icon.591e56d1.svg",height:16,width:16,blurWidth:0,blurHeight:0}},99665:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n={src:"/_next/static/media/edit-icon.ea85b2f2.svg",height:18,width:18,blurWidth:0,blurHeight:0}},63947:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var n=i(74848),a=i(96540),o=i(51098);let r={src:"/_next/static/media/info.85dd0fce.svg",height:12,width:12,blurWidth:0,blurHeight:0};var l=i(13725),s=i(49964),d=i(18584),c=i(98935),u=i(29284),p=i.n(u);let _=e=>{let{showText:t=!0,isTripPage:i=!1}=e,{tAsString:u}=(0,c.Ay)(),{showDialog:_}=(0,s.u)(),{isMobile:h}=(0,d.U)(),v=(0,a.useCallback)(()=>{_(!0)},[_]),m=(0,a.useMemo)(()=>(0,n.jsx)("span",{className:p().feedback,onClick:v,children:u("feedbackLink")},"Feedback link"),[v,u]);return t?(0,n.jsxs)("div",{className:p().container,children:[!i&&(0,n.jsx)(l.A,{className:p().icon,src:r,width:12,height:12,alt:"info-icon"}),(0,n.jsx)("p",{children:i?u("chatPage.feedbackTrip"):h?(0,n.jsx)(o.x6,{i18nKey:"chatPage.feedbackMobile",components:{feedbackUrl:m}}):(0,n.jsx)(o.x6,{i18nKey:"chatPage.feedback",components:{feedbackUrl:m}})})]}):null}},40900:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var n=i(74848),a=i(38229),o=i.n(a),r=i(13725),l=i(96540),s=i(88023),d=i(98935),c=i(89906),u=i(83819),p=i(18584);let _=e=>{let{messageText:t="",eventCardName:i,isUserMessage:a=!1}=e,{tAsString:_}=(0,d.Ay)(),[h,v]=(0,l.useState)(!1),m=(0,s.A)(),{isMobile:g}=(0,p.U)(),x=()=>{navigator.clipboard.writeText(t).then(()=>{v(!0),setTimeout(()=>{v(!1)},1e3)})},f=(e,t)=>i=>{i.preventDefault(),i.stopPropagation(),m({event:e}),t()};return(0,n.jsx)("div",{className:(0,c.A)(o().wrapper,{[o().user_message]:a}),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:g?(0,n.jsxs)("button",{onClick:f("CopyChatMessage",x),className:(0,c.A)(o().copy_button,{[o().copied]:h,[o().more_space]:a}),"aria-label":_(h?"chatPage.copyShare.copied":"chatPage.copyShare.copy"),children:[h?(0,n.jsx)(r.A,{src:"/check.svg",alt:"copied",width:12,height:12}):(0,n.jsx)(r.A,{src:"/buttons/copy-black.svg",alt:"copy",width:12,height:12}),(0,n.jsx)("span",{className:o().button_text,children:_(h?"chatPage.copyShare.copied":"chatPage.copyShare.copy")})]}):(0,n.jsx)(u.A,{tooltip:_(h?"chatPage.copyShare.copied":"chatPage.copyShare.copy"),position:"bottom-center",className:(0,c.A)(o().tooltip_container,{[o().more_space]:a}),usePortal:!0,children:(0,n.jsxs)("button",{onClick:f("CopyChatMessage",x),className:(0,c.A)(o().copy_button,{[o().copied]:h}),"aria-label":_(h?"chatPage.copyShare.copied":"chatPage.copyShare.copy"),children:[h?(0,n.jsx)(r.A,{src:"/check.svg",alt:"copied",width:12,height:12}):(0,n.jsx)(r.A,{src:"/buttons/copy-black.svg",alt:"copy",width:12,height:12}),(0,n.jsx)("span",{className:o().button_text,children:_(h?"chatPage.copyShare.copied":"chatPage.copyShare.copy")})]})})})}},76415:(e,t,i)=>{"use strict";i.d(t,{A:()=>E});var n=i(74848),a=i(96540),o=i(18584),r=i(79640),l=i(71975),s=i(40855),d=i(33071),c=i(30157),u=i(13725),p=i(98935),_=i(64812),h=i(72352),v=i(19903),m=i(48441),g=i(88023);function x(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}}let f=()=>{let[e,t]=(0,a.useState)(null),i=(0,a.useCallback)(i=>{i!==e&&t(i)},[e]),n=(0,a.useCallback)(t=>{if(!e||0!==t.button)return;let i=new Date().getTime(),n={left:e.scrollLeft,top:e.scrollTop,x:t.clientX,y:t.clientY},a=t=>{let i=t.clientX-n.x,a=t.clientY-n.y;(Math.abs(i)>5||Math.abs(a)>5)&&(t.preventDefault(),e.scrollTop=n.top-a,e.scrollLeft=n.left-i,r(e))},o=t=>{if(new Date().getTime()-i>150){t.preventDefault(),t.stopPropagation();let e=t=>{t.preventDefault(),t.stopPropagation(),document.removeEventListener("click",e,!0)};document.addEventListener("click",e,!0)}document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o),l(e)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",o)},[e]),o=(0,a.useCallback)(t=>{if(!e)return;let i=t.touches[0],n={left:e.scrollLeft,top:e.scrollTop,x:i.clientX,y:i.clientY},a=t=>{let i=t.touches[0],a=i.clientX-n.x,o=i.clientY-n.y;e.scrollTop=n.top-o,e.scrollLeft=n.left-a,r(e)},o=()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchend",o),l(e)};document.addEventListener("touchmove",a),document.addEventListener("touchend",o)},[e]),r=e=>{e.style.cursor="grabbing",e.style.userSelect="none"},l=e=>{e.style.cursor="grab",e.style.removeProperty("user-select")};return(0,a.useEffect)(()=>{if(e)return e.addEventListener("mousedown",n),e.addEventListener("touchstart",o,{passive:!0}),()=>{e.removeEventListener("mousedown",n),e.removeEventListener("touchstart",o,{passive:!0})}},[e]),[i]};var b=i(26518),y=i(6386),j=i(70714),C=i(41696),w=i.n(C);let k=e=>{let{query:t,setQuery:i,dependencyKey:n,enabled:o}=e,r=(0,a.useRef)(void 0),l=(0,a.useRef)("");(0,a.useEffect)(()=>{l.current=t},[t]);let s=(0,a.useCallback)((e,t)=>{if(!o||!e)return;let i="layla_chat_input_".concat(e);t.trim()?localStorage.setItem(i,t):localStorage.removeItem(i)},[o]),d=(0,a.useCallback)(e=>{if(!o||!e)return;let t="layla_chat_input_".concat(e),n=localStorage.getItem(t);return!!(n&&n.trim())&&(i(n),localStorage.removeItem(t),!0)},[o,i]);return(0,a.useEffect)(()=>{let e=r.current;e&&e!==n&&s(e,l.current),n&&n!==e&&!d(n)&&i(""),r.current=n},[n,o,i,d,s]),(0,a.useEffect)(()=>{if(!o)return;let e=()=>{n&&s(n,l.current)},t=()=>{"hidden"===document.visibilityState&&n&&s(n,l.current)};return window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("beforeunload",e),document.removeEventListener("visibilitychange",t)}},[n,o,s]),(0,a.useEffect)(()=>()=>{o&&n&&s(n,l.current)},[n,o,s]),{clearSavedQuery:(0,a.useCallback)(()=>{if(o&&n){let e="layla_chat_input_".concat(n);localStorage.removeItem(e)}},[o,n])}},A=e=>{let{placeholder:t,disabled:i,lockInput:C,onSubmit:A,onUnlockButtonClick:S,onDocumentUpload:P,loadSuggestions:N=()=>{},hideQuickReplies:T,quickReplies:I,suggestions:E,onQuickReplySuggestionClick:R,getBlockedMessage:D,initialQuery:M,value:L,onChange:B,keepPrompt:U,disableAutoFocus:H,preventMobileAutoFocus:F=!1,className:O,chatId:W,enablePersistence:V=!1,isChatPage:q=!1,isTripPage:G=!1,placeholderSuggestions:z}=e,{tAsString:Q}=(0,p.Ay)(),{isMobile:Y}=(0,o.U)(),{authUserId:J}=(0,l.A)(),{displayPaywall:Z}=(0,m.M)(),{chat:X}=(0,r.Y)(),{creditsUsed:K,creditLimit:$}=(0,v.k)(),{subscription:ee,userSubscriptionCategory:et}=(0,h.R)(),ei=(0,g.A)(),[en,ea]=(0,a.useState)(M||"");(0,a.useEffect)(()=>{void 0!==L&&L!==en&&ea(L)},[L,en]);let eo=(0,a.useCallback)(e=>{ea(e),B&&B(e)},[B]),{clearSavedQuery:er}=k({query:en,setQuery:eo,dependencyKey:W,enabled:V}),el=(0,a.useRef)(null),es=(0,a.useRef)(null),[ed]=f(),ec=(0,a.useRef)(null),eu=(0,a.useRef)(""),ep=(0,a.useCallback)(()=>{ei({event:"CreditCounterUpgrade",data:{chatId:null==X?void 0:X.id,creditsUsed:K,creditLimit:$,creditsRemaining:$&&K?Math.max(0,$-K):0}}),Z(!0,"credit_upgrade")},[ei,null==X?void 0:X.id,K,$,Z]),e_=void 0!==K&&void 0!==$?Math.max(0,$-K):0,eh=e_>0?1===e_?Q("chatPage.creditCounter.remaining",{count:e_}):Q("chatPage.creditCounter.remaining_plural",{count:e_}):Q("chatPage.creditCounter.noCreditsRemaining"),[ev,em]=(0,a.useState)(!1),[eg,ex]=(0,a.useState)(F&&Y),ef=(0,a.useRef)(null),eb=(0,a.useCallback)(()=>{F&&Y&&!ev&&(em(!0),ex(!1))},[F,Y,ev]),ey=(0,a.useMemo)(()=>Y?el:x(el,ed),[Y,ed]),ej=(0,a.useMemo)(()=>(0,s.A)(e=>N(e),500),[N]),eC=(0,a.useCallback)(e=>{let t=e.target.value;eo(t),ej(t),ec.current&&(ec.current(),eu.current=t),eb()},[ej,eb,eo]),ew=(0,a.useCallback)(e=>{if(F&&Y&&!ev){e.target.blur();return}},[F,Y,ev]),ek=(0,a.useCallback)(()=>{eb()},[eb]),eA=(0,a.useCallback)(()=>{eb()},[eb]),eS=(0,a.useCallback)(e=>{var t,i;if(null===(t=el.current)||void 0===t?void 0:t.contains(e.relatedTarget)){e.preventDefault(),null===(i=es.current)||void 0===i||i.focus();return}},[]),eP=(0,a.useCallback)(e=>{var t;let i=en.endsWith(" ")?"".concat(en).concat(e.trim()," "):"".concat(en," ").concat(e.trim()," ");eo(i),null==N||N(i),ec.current&&(ec.current(),eu.current=i),null===(t=es.current)||void 0===t||t.focus(),null==R||R(e),el.current&&el.current.scrollTo({left:0,behavior:"smooth"})},[N,R,en,eo]),eN=(0,a.useCallback)(e=>{ec.current=e},[]),eT=(0,n.jsx)(n.Fragment,{children:null==I?void 0:I.map((e,t)=>(0,n.jsxs)("button",{className:w().quick_reply_button,onClick:()=>eP(e),disabled:i,children:[!q&&(0,n.jsx)(u.A,{src:"/plusColorGray.svg",alt:Q("common.plusIconAlt"),width:12,height:12}),e]},t))});(0,a.useEffect)(()=>{let e=null==D?void 0:D();e&&""!==e&&eo(e)},[eo]),(0,a.useEffect)(()=>{M&&M.trim().length>0&&N&&"function"==typeof N&&N!==(()=>{})&&J&&ej(M)},[M,J]),(0,a.useEffect)(()=>{if(!eg&&Y&&ev&&F){var e;null===(e=es.current)||void 0===e||e.focus()}},[F,Y,ev,eg]),(0,a.useEffect)(()=>{if(F&&Y&&!ev)return ef.current=setInterval(()=>{es.current&&document.activeElement===es.current&&es.current.blur()},50),()=>{ef.current&&clearInterval(ef.current)}},[F,Y,ev]),(0,a.useEffect)(()=>()=>{ef.current&&clearInterval(ef.current)},[]);let eI=(0,n.jsx)(n.Fragment,{children:null==E?void 0:E.map((e,t)=>(0,n.jsxs)("button",{className:w().quick_reply_button,onClick:()=>eP(e),disabled:i,children:[(0,n.jsx)(u.A,{src:"/plusColorGray.svg",alt:Q("common.plusIconAlt"),width:12,height:12}),e]},t))}),eE={container:w().input_container,inputAndButton:w().input_and_button,input:w().input,sendButtonContainer:w().send_button_container,sendButton:w().send_button,unlockButton:C?w().unlockButtonAsText:w().unlockButton,buttonWrapperShadow:w().button_wrapper_shadow},eR="".concat(eE.container," ").concat(O||""," ").concat(eg?w().protected_input:"").replace(/\s+/g," ").trim();return(0,n.jsxs)("div",{className:eR,children:[C&&(0,n.jsx)("div",{className:w().lockedOverlay,children:(0,n.jsxs)("button",{onClick:S,className:eE.unlockButton,children:[(0,n.jsx)(u.A,{className:w().locked_img,src:C?b.A:y.A,alt:Q("common.lockIconAlt"),width:20,height:20}),Y?Q("chatPage.input.unlock"):Q("chatPage.input.unlockDesktop")]})}),(0,n.jsx)(d.a,{value:en,onChange:eC,onSend:e=>{var t;let i=e.trim();i.length&&(null===(t=ec.current)||void 0===t||t.call(ec),U||eo(""),A(i).then(()=>{er()}).catch(()=>{eo(i)}))},placeholder:void 0!==t?t:Y?Q("chatPage.input.placeholder"):Q("homepage.heroBanner.askAnything")+"...",disabled:i||C,disableSendButton:null==X?void 0:X.isProcessing,variant:"default",actionButtons:P&&!C?[{icon:(0,n.jsx)(_.A,{className:"ml-2",content:Q("common.uploadDocuments"),side:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(c.A,{className:"size-5"})})}),onClick:P}]:void 0,voiceRecorderElement:(0,n.jsx)(j.A,{onTranscript:e=>{let t=eu.current,i=t?"".concat(t).concat(t.endsWith(" ")?"":" ").concat(e):e;eo(i),ej(i)},onRecordingStop:()=>{var e;eu.current=en,null==es||null===(e=es.current)||void 0===e||e.focus()},disabled:C,onResetRef:eN,location:"ChatInput"}),autoFocus:!H&&!Y&&!eg,onFocus:ew,onBlur:eS,onClick:ek,onTouchStart:eA,ref:es,showCreditNotification:!!(!(ee&&"early_trial_canceller"!==et&&"previous_subscriber"!==et)&&void 0!==K&&void 0!==$&&!G),creditText:eh,upgradeButtonLabel:Q("chatPage.creditCounter.upgrade"),onUpgrade:ep,placeholderSuggestions:z&&z.length>0?z.length<7?Array(7).fill(null).map((e,t)=>z[t%z.length]):z:void 0,suggestionDuration:2e3,pauseDuration:1e3}),!T&&!q&&(0,n.jsx)("div",{className:w().quick_replies_container,ref:ey,children:en&&(null==E?void 0:E.length)?eI:eT})]})};var S=i(48928),P=i.n(S);let N=e=>{let{quickReplies:t,disabled:i,onQuickReplySuggestionClick:r}=e,{isMobile:l}=(0,o.U)(),s=(0,a.useRef)(null),d=(0,a.useRef)(null),[c]=f(),[u,p]=(0,a.useState)(!1),_=(0,a.useMemo)(()=>l?s:x(s,c),[l,c]),h=e=>{r(e),s.current&&s.current.scrollTo({left:0,behavior:"smooth"})};(0,a.useEffect)(()=>{let e=s.current,t=d.current;if(!e||!t)return;let i=()=>{let i=e.scrollLeft>0;p(i),i?t.classList.add(P().scrolled):t.classList.remove(P().scrolled)};return e.addEventListener("scroll",i),()=>{e.removeEventListener("scroll",i)}},[]);let v=(0,n.jsx)(n.Fragment,{children:null==t?void 0:t.map((e,t)=>(0,n.jsx)("button",{className:P().quick_reply_button,onClick:()=>h(e),disabled:i,children:e},t))});return(0,n.jsx)("div",{className:"".concat(P().quick_replies_container_wrapper," ").concat(u?P().scrolled:""),ref:d,children:(0,n.jsx)("div",{className:P().quick_replies_container_chat_page,ref:_,children:v})})};var T=i(38856),I=i(43900);let E=e=>{var t,i;let{hideQuickReplies:s=!1,onSendMessage:d,toggleExpandSidePanel:c,placeholder:u,placeholders:_,disableAutoFocus:h,preventMobileAutoFocus:v,className:x,isChatPage:f=!1,isTripPage:b=!1}=e,{chat:y,sendMessage:j,uploadDocument:C,getBlockedMessage:w,messages:k,disableSending:S,lockChat:P,startTracking:E}=(0,r.Y)(),{tAsString:R}=(0,p.Ay)(),{authUserId:D}=(0,l.A)(),{displayPaywall:M}=(0,m.M)(),L=(0,g.A)(),{triggerFileUpload:B}=(0,T.Ay)(),{isMobile:U}=(0,o.U)(),{isFromBlockedCountry:H}=(0,I.B)(),F=!(!y||!y.usersIds||0===y.usersIds.length||!0===y.usersIds.includes(D))||S,O=(0,a.useCallback)(async e=>{if(null==d||d(),!await j(e,!0))throw console.error("Failed to send message"),Error(R("chatPage.input.sendError"))},[d,j,R]),W=e=>{L({event:"ChatQuickReply",data:{chatId:null==y?void 0:y.id,suggestion:e}}),f&&(j(e,!1),U?null==d||d():null==c||c("close"))},V=(0,a.useCallback)(()=>{B({onFileSelected:e=>{console.log("File selected for upload:",{name:e.name,type:e.type,size:e.size}),C(e)},eventName:"DocumentUploadAttempt",chatId:null==y?void 0:y.id})},[B,C,null==y?void 0:y.id]);return(0,n.jsxs)(n.Fragment,{children:[f&&!b&&(0,n.jsx)(N,{quickReplies:null==k?void 0:null===(t=k[(null==k?void 0:k.length)-1])||void 0===t?void 0:t.quickReplies,onQuickReplySuggestionClick:W,disabled:F}),(0,n.jsx)(A,{onSubmit:O,onUnlockButtonClick:()=>{if(H){M(!0,"blocked_country");return}U?M(!0,"unlock_chat"):M(!1,"unlock_chat")},onDocumentUpload:E?V:void 0,lockInput:P,placeholder:u,hideQuickReplies:!!f||s,quickReplies:null==k?void 0:null===(i=k[(null==k?void 0:k.length)-1])||void 0===i?void 0:i.quickReplies,onQuickReplySuggestionClick:W,disabled:F,getBlockedMessage:w,disableAutoFocus:h,preventMobileAutoFocus:v,className:x,chatId:null==y?void 0:y.id,enablePersistence:!0,isChatPage:f,isTripPage:b,placeholderSuggestions:b?_:void 0})]})}},79818:(e,t,i)=>{"use strict";i.d(t,{A:()=>W});var n=i(74848),a=i(77222),o=i(96540),r=i(16274),l=i.n(r),s=i(79640),d=i(89906),c=i(18584),u=i(86715),p=i(74812),_=i.n(p),h=i(98935),v=i(69235),m=i(46002),g=i(67154),x=i(88023),f=i(8350),b=i(4036),y=i(77749),j=i(66814),C=i(15829),w=i(93262),k=i(97025),A=i(34588),S=i(83819),P=i(45703),N=i.n(P),T=i(13725),I=i(85859),E=i(72111),R=i(38520),D=i.n(R);let M=e=>{let{title:t,message:i,okButtonText:a,cancelButtonText:r,onOk:l,onCancel:s,onClose:d,show:c=!0}=e,{tAsString:u}=(0,h.Ay)(),p=(0,o.useCallback)(()=>null==l?void 0:l(),[l]),_=(0,o.useCallback)(()=>null==s?void 0:s(),[s]);return(0,n.jsx)(I.lG,{open:c,onOpenChange:e=>!e&&(null==d?void 0:d()),children:(0,n.jsxs)(I.Cf,{children:[(0,n.jsx)(I.c7,{children:(0,n.jsx)(I.L3,{className:D().header,children:(0,n.jsx)("h3",{children:t})})}),(0,n.jsx)("div",{className:D().content,children:i&&(0,n.jsx)("p",{className:D().message,children:i})}),(0,n.jsxs)(I.Es,{className:D().footer,children:[(0,n.jsx)(I.HM,{asChild:!0,children:(0,n.jsx)(E.$,{variant:"outline",onClick:_,children:null!=r?r:u("trip.edit.updateTrip.cancel")})}),(0,n.jsx)(E.$,{onClick:p,children:null!=a?a:u("trip.edit.updateTrip.ok")})]})]})})};var L=i(79718),B=i(99665);let U=e=>{let{toggleExpandSidePanel:t,onClose:i,className:a,classNameTooltip:r}=e,{isMobile:l}=(0,c.U)(),{enabled:d,saveTrip:u}=(0,L.j)(),{sendMessage:p}=(0,s.Y)(),{tAsString:_}=(0,h.Ay)(),v=(0,x.A)(),[m,g]=(0,o.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsx)(M,{title:_("trip.edit.updateTrip.title"),message:_("trip.edit.updateTrip.message"),onOk:()=>{g(!1),u()},onCancel:()=>g(!1),onClose:()=>g(!1),show:m}),(0,n.jsx)(S.A,{tooltip:_("trip.bottomBar.modifyTripButton"),position:"bottom-center",style:{width:"fit-content"},classNameTooltip:r,children:(0,n.jsxs)("button",{onClick:()=>{if(d){g(!0);return}p("".concat(_("trip.bottomBar.modifyTripChatMessage2"),"...")),v({event:"ModifyTrip"}),l?null==i||i():null==t||t("close")},className:"jsx-5d70d2d812454dff "+(a||""),children:[(0,n.jsx)(T.A,{src:B.A,alt:"modify-trip-icon",width:16,height:16}),(0,n.jsx)(N(),{id:"5d70d2d812454dff",children:".text.jsx-5d70d2d812454dff{display:block}@media(max-width:1366px){.text.jsx-5d70d2d812454dff{display:none}}"}),(0,n.jsx)("div",{className:"jsx-5d70d2d812454dff text",children:_("trip.bottomBar.modifyTripButton")})]})})]})},H=e=>{var t,i,a;let{isRightPanelExpanded:r,toggleExpandSidePanel:l}=e,{tAsString:d}=(0,h.Ay)(),{trip:c}=(0,m.f)(),{tripActivities:u}=(0,g.y)(),{setSelectedItem:p}=(0,s.Y)(),P=(0,x.A)(),{formattedTrip:N}=(0,C.A)(c),[T,I]=(0,o.useState)(!1),E=(0,o.useRef)(null),R=(0,v.A)(N&&c?(0,n.jsx)(w.A,{formattedTrip:N,trip:c,onClose:I,formatDatesF:k.uh,toggleExpandSidePanel:l,isRightPanelExpanded:null!=r&&r}):(0,n.jsx)("div",{}),null,A.J);if(!N)return(0,n.jsx)("div",{className:_().menuContainer});let D=(null==c?void 0:c.id)?"".concat(window.location.origin,"/trip/").concat(c.id):"",M=(null==c?void 0:c.videos)&&(null==c?void 0:null===(t=c.videos)||void 0===t?void 0:t.length)>0?null==c?void 0:null===(a=c.videos)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.thumbnailUrl:null;return(0,n.jsxs)(n.Fragment,{children:[T&&R,(0,n.jsx)("div",{className:_().menuContainer,children:(0,n.jsxs)("div",{className:_().buttons_container,children:[(0,n.jsx)("div",{style:{width:"fit-content"},children:(0,n.jsx)(U,{toggleExpandSidePanel:l,className:"".concat(_().modify_trip_button),onClose:()=>p(null)})}),(0,n.jsx)(S.A,{tooltip:d("trip.pdf.downloadPDF"),position:"bottom-center",style:{width:"fit-content"},classNameTooltip:_().portalTooltip,usePortal:!0,children:(0,n.jsxs)("div",{className:"".concat(_().pdf_wrapper),onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},children:[(0,n.jsx)(b.A,{trip:N,tripActivities:u,collapseSidePanel:()=>{r&&(null==l||l())},originalTrip:c,className:"".concat(_().trip_pdf_button),tooltipPosition:!0,hideTooltip:!0,buttonRef:E}),(0,n.jsx)("div",{className:_().pdf_wrapper_download,children:d("partners.portal.userList.download")})]})}),(0,n.jsx)(y.A,{shareUrl:D,itineraryTitle:null==c?void 0:c.title,locationImgUrl:M||"",eventCardName:f.I.TRIP,shareButtonsTitle:d("trip.shareButtonsText",{name:d("shareButtonsTitle.trip")}),onClick:()=>{(null==c?void 0:c.id)&&P({event:"OpenPopupTripShare",data:{tripId:c.id}})},eventData:{entityId:null==N?void 0:N.id,entityType:f.n.TRIP},showIcon:!0,className:"".concat(_().share_button)}),(0,n.jsx)(j.A,{onClick:()=>null==I?void 0:I(!0),className:"".concat(_().basket_button),totalAmount:null==N?void 0:N.formattedTotalPrice,useMobileText:!0})]})})]})};var F=i(48441),O=i(3935);function W(e){let{onClose:t,toggleExpandSidePanel:i,isRightPanelExpanded:r,masterBuilder:p,masterHeaderBuilder:_,detailsHeaderBuilder:h,detailsBuilder:v,contentIsBelowHeader:m=!1,detailsContentIsBelowHeader:g,hideButtons:x=!1}=e,[f,b]=(0,o.useState)([]),{selectedItem:y}=(0,s.Y)(),{showPaywall:j}=(0,F.M)(),C=(null==y?void 0:y.type)==="trip",{isMobile:w}=(0,c.U)(),k=(0,u.useRouter)().pathname.includes("/creator"),A=(0,o.useCallback)(e=>{b(t=>[...t,e])},[]),S=(0,o.useRef)(null),P=()=>{b(e=>e.length<=0?(t(),e):e.slice(0,-1))},N=f.length>0?f[f.length-1]:null,T=(0,o.useMemo)(()=>p(A,t),[p,A,t]),I=(0,o.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_())&&void 0!==e?e:null},[_]),E=N?null==g?void 0:g(N):m,R=e=>x?null:(0,n.jsx)(a.A,{id:w?"closeRightSidebarButtonMobile":"closeRightSidebarButtonNonTrip",onClick:P,position:"left",customStyles:e}),D=(0,d.A)(l().header_component,!x&&C&&l().trip_header_component),M=(0,d.A)(l().container,C&&l().container_trip),L=(0,d.A)(E?l().content_wrapper_below_header:l().content_wrapper,k&&l().content_wrapper_trip_creator),B=N?null==h?void 0:h(N):I,U=!!N||!!I;return(0,n.jsxs)("div",{className:M,children:[!C&&w&&R(l().close_button_mobile_position),!C&&!w&&!x&&(0,n.jsx)("div",{className:l().trip_buttons_container,children:R(l().trip_close_button)}),C&&w&&(0,n.jsxs)("div",{className:l().trip_header_wrapper,children:[!x&&(0,n.jsx)("div",{className:l().trip_close_button_container,children:R(l().trip_close_button)}),!j&&(0,n.jsx)("div",{className:l().trip_header_content,children:(0,n.jsx)(H,{isRightPanelExpanded:r,toggleExpandSidePanel:i})})]}),!C&&(U||C?(0,n.jsx)("div",{id:"side-panel-header",children:(0,n.jsx)("div",{className:(0,d.A)(D),children:C&&w?(0,n.jsx)("div",{className:l().trip_header_content,children:(0,n.jsx)(H,{isRightPanelExpanded:r,toggleExpandSidePanel:i})}):B})}):null),(0,n.jsx)("div",{className:L,id:O.L,ref:S,children:N?null==v?void 0:v(N,A,P):T})]})}},37813:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var n=i(74848),a=i(88023),o=i(77749),r=i(8350),l=i(10788),s=i.n(l),d=i(97025),c=i(86715),u=i(48441),p=i(98935),_=i(11233);function h(e){var t,i,l;let{trip:d}=e,{tAsString:h}=(0,p.Ay)(),{showPaywall:m}=(0,u.M)(),g=(0,c.useRouter)().pathname.includes("/creator"),x=(0,a.A)(),f="".concat(window.location.origin,"/trip/").concat(d.id),b=(null==d?void 0:d.videos)&&(null==d?void 0:null===(t=d.videos)||void 0===t?void 0:t.length)>0?null==d?void 0:null===(l=d.videos)||void 0===l?void 0:null===(i=l[0])||void 0===i?void 0:i.thumbnailUrl:null;return(0,n.jsxs)("div",{className:s().container,children:[m&&(0,n.jsx)(v,{trip:d}),(0,n.jsxs)("div",{className:s().actions_container,children:[(0,n.jsx)(_.A,{tripId:d.id,tripSlug:d.title.toLowerCase().replace(/\s+/g,"-"),className:s().edit_trip_button}),(0,n.jsx)(o.A,{shareUrl:f,itineraryTitle:null==d?void 0:d.title,locationImgUrl:b||"",eventCardName:r.I.TRIP,shareButtonsTitle:h("trip.shareButtonsText",{name:h("shareButtonsTitle.trip")}),onClick:()=>{x({event:"OpenPopupTripShare",data:{tripId:d.id}})},eventData:{entityId:d.id,entityType:r.n.TRIP},showIcon:g})]})]})}let v=e=>{var t;let{trip:i}=e,{locale:a}=(0,c.useRouter)(),{tAsString:o}=(0,p.Ay)(),r=null==i?void 0:null===(t=i.legs[(null==i?void 0:i.legs.length)-1])||void 0===t?void 0:t.endDate;return(0,n.jsxs)("div",{className:s().title_and_details,children:[(0,n.jsx)("h1",{className:s().title_content_title,children:i.title}),(0,n.jsxs)("button",{className:s().trip_details_button,children:[(0,n.jsx)("small",{children:(0,d.uh)(new Date(i.startDate),new Date(r||i.endDate),a)}),(0,n.jsx)("span",{className:s().dots,children:"•"})," ",(0,n.jsx)("small",{children:o("trip.tripPopups.travellers",{count:i.travelers.length})})," ",(0,n.jsx)("span",{className:s().dots,children:"•"})," ",(0,n.jsxs)("small",{children:[i.numberOfRooms," ",o(i.numberOfRooms>1?"trip.tripPopups.rooms":"trip.tripPopups.room")]})]})]})}},5539:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(74848),a=i(68647),o=i(34896),r=i.n(o);let l=()=>(0,n.jsxs)("div",{className:r().side_panel_container,children:[(0,n.jsxs)("div",{className:r().component_header,children:[(0,n.jsxs)("div",{className:r().component_header_top,children:[(0,n.jsx)(a.A,{animation:"wave",variant:"circular",width:32,height:32}),(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"9px"},variant:"rounded",width:"10%",height:32})]}),(0,n.jsxs)("div",{className:r().component_header_bottom,children:[(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"8px"},variant:"rounded",width:"15%",height:16}),(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"8px"},variant:"rounded",width:"45%",height:30}),(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"8px"},variant:"rounded",width:"35%",height:20})]})]}),(0,n.jsxs)("div",{className:r().component_content,children:[(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"20px"},variant:"rounded",width:"45%",height:18}),(0,n.jsx)("div",{className:r().component_content_days,children:Array.from(Array(8)).map((e,t)=>(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"10px",minWidth:"75px"},variant:"rounded",height:54},t))}),(0,n.jsxs)("div",{className:r().component_content_main,children:[(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"20px"},variant:"rounded",width:"45%",height:18}),(0,n.jsxs)("div",{className:r().content_part,children:[(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"30px",mb:"12px"},variant:"rounded",width:"10%",height:14}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"100%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"75%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"100%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"55%"})]}),(0,n.jsxs)("div",{className:r().content_part,children:[(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"30px",mb:"12px"},variant:"rounded",width:"10%",height:14}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"100%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"75%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"100%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"55%"})]}),(0,n.jsxs)("div",{className:r().content_part,children:[(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"30px",mb:"12px"},variant:"rounded",width:"10%",height:14}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"100%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"75%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"100%"}),(0,n.jsx)(a.A,{animation:"wave",variant:"text",width:"55%"})]}),(0,n.jsx)("div",{style:{marginTop:"24px"},className:r().component_content_days,children:Array.from([,,,,,]).map((e,t)=>(0,n.jsx)(a.A,{animation:"wave",sx:{borderRadius:"9px",minWidth:"132px"},variant:"rounded",height:180},t))})]})]})]})},36366:(e,t,i)=>{"use strict";i.d(t,{T:()=>d,b:()=>s});var n=i(74848),a=i(81445),o=i(96540);let r=(0,o.createContext)(void 0),l={isDrawerOpen:!1,drawerContent:null,rightPanelWidth:600,openDrawer:()=>{},closeDrawer:()=>{},setRightPanelRef:()=>{}},s=()=>(0,o.useContext)(r)||l,d=e=>{let{children:t}=e,[i,l]=(0,o.useState)(!1),[s,d]=(0,o.useState)(null),[c,u]=(0,o.useState)(600),p=(0,o.useRef)(null),_=(0,o.useCallback)(e=>{d(null),d(e),l(!0)},[]),h=(0,o.useCallback)(()=>{l(!1),d(null)},[]),v=(0,o.useCallback)(e=>{p.current=e},[]);return(0,o.useEffect)(()=>{let e=()=>{p.current&&u(p.current.getBoundingClientRect().width)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,o.useEffect)(()=>{let e=()=>{p.current&&u(p.current.getBoundingClientRect().width)};e();let t=(0,a.A)(e,100);if(p.current&&window.ResizeObserver){let e=0,i=-1,n=new ResizeObserver(()=>{var n;let a=null===(n=p.current)||void 0===n?void 0:n.getBoundingClientRect();a&&a.width!==i&&(i=a.width,cancelAnimationFrame(e),e=requestAnimationFrame(()=>t()))});return n.observe(p.current),()=>{cancelAnimationFrame(e),n.disconnect()}}},[]),(0,n.jsx)(r.Provider,{value:{isDrawerOpen:i,drawerContent:s,rightPanelWidth:c,openDrawer:_,closeDrawer:h,setRightPanelRef:v},children:t})}},47436:(e,t,i)=>{"use strict";i.d(t,{A:()=>t5});var n=i(74848),a=i(79640),o=i(75329),r=i(96540),l=i(89735),s=i(72352),d=i(28001),c=i(36366),u=i(14953),p=i.n(u),_=i(63664),h=i.n(_),v=i(48441),m=i(88023),g=i(18584),x=i(89906),f=i(42137),b=i(98935),y=i(71975),j=i(13816),C=i(40532),w=i(86715),k=i(49512),A=i.n(k),S=i(13725),P=i(14770),N=i.n(P),T=i(34480),I=i.n(T);let E=e=>{let{isActive:t,className:i}=e;return(0,n.jsx)("span",{className:"".concat(N().className," ").concat(I()[i]," ").concat(t?I().icon__active:"")})};var R=i(53595),D=i.n(R),M=i(13365);let L=e=>{let{id:t,text:i,img:o,icon:r,disabled:l,iconClassName:s}=e,d=(0,M.A)("(max-width:768px)"),{sendMessage:c,chat:u}=(0,a.Y)(),p=(0,m.A)(),_=async e=>{c(e,!1),p({event:"ChatQuickReplyFirst",data:{chatId:null==u?void 0:u.id}})},h=r.split("/"),v=h[h.length-1];return d?(0,n.jsxs)("div",{className:D().tile_mobile,onClick:l?void 0:()=>_(i),children:[(0,n.jsx)(E,{isActive:!0,className:s}),i]},t):(0,n.jsxs)("div",{className:D().tile,style:{backgroundImage:"url(".concat(o,")")},onClick:l?void 0:()=>_(i),children:[(0,n.jsx)("div",{className:D().icon,children:(0,n.jsx)(S.A,{src:r,width:16,height:16,alt:"".concat(v," icon")})}),(0,n.jsx)("div",{className:D().title,children:i}),(0,n.jsx)("div",{className:D().text,children:i})]},t)},B=["/QuickRepliesIcons/globe.svg","/QuickRepliesIcons/plane.svg","/QuickRepliesIcons/map.svg","/QuickRepliesIcons/hotel.svg"],U=["iconInspire","iconFlight","iconItinerary","iconHotel"],H=()=>{let[e,t]=(0,r.useState)([]),{locale:i}=(0,w.useRouter)(),{disableSending:o}=(0,a.Y)();return(0,r.useEffect)(()=>{(0,C.UC)("configurations/quick-replies").then(e=>{if(e){let{items:n}=e;if(!n)return;let a=[];for(let e=0;e<n.length;e++){let t=n[e],o=t.title[i||"en"]||t.title.en||"";a.push({id:"".concat(e),text:o,img:t.imageUrlNoText||"",iconClassname:U[e]})}t(a)}})},[]),(0,n.jsx)("div",{className:A().gridContainer,children:e.map((e,t)=>(0,n.jsx)(L,{id:e.id,text:e.text,img:e.img,icon:B[t],disabled:o,iconClassName:e.iconClassname},e.id))})};var F=i(76415);let O={src:"/_next/static/media/typing.d905601b.gif",height:150,width:120,blurWidth:0,blurHeight:0};var W=i(91015),V=i.n(W),q=i(88541),G=i(11954);let z=()=>{let{tAsString:e}=(0,b.Ay)(),{messages:t}=(0,a.Y)(),{isMobile:i}=(0,g.U)(),o=t&&t.length>1&&t[t.length-1],r=e("trip"===(o&&(0,G.Am)(o))?"chatPage.input.trip":"chatPage.input.typing");return(0,n.jsxs)("div",{className:V().typing_container,children:[!i&&(0,n.jsx)(q.A,{size:24}),(0,n.jsx)("p",{className:V().typing_text,children:r}),(0,n.jsx)("div",{className:V().typing_indicator,children:(0,n.jsx)(S.A,{src:O,alt:"Typing",width:20,height:25})})]})};var Q=i(63947),Y=i(31696);let J={src:"/_next/static/media/external-link.986f5500.svg",height:16,width:16,blurWidth:0,blurHeight:0};var Z=i(19785),X=i.n(Z);let K=e=>{let{children:t,onClick:i,colored:a=!1}=e;return(0,n.jsx)("button",{onClick:i,className:"".concat(X().button," ").concat(a?X().color_button:""),children:t})},$=()=>{let{tAsString:e}=(0,b.Ay)(),t=(0,r.useMemo)(()=>"/faq",[]),i=(0,r.useCallback)(()=>{window.open(t,window.navigator.userAgent.includes("iPhone;")?"_self":"_blank")},[t]);return(0,n.jsx)(K,{onClick:i,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"},children:[(0,n.jsx)(S.A,{src:J,alt:"Link icon",width:16,height:16}),(0,n.jsx)("span",{children:e("creator.profile.help")})]})})};var ee=i(46002),et=i(67154),ei=i(15829),en=i(4036),ea=i(6811),eo=i.n(ea);let er=e=>{let{chatMessage:t}=e,{messages:i}=(0,a.Y)(),o=(0,r.useMemo)(()=>{var e;return null==i?void 0:null===(e=i.find(e=>e.index<t.index&&e.tripId))||void 0===e?void 0:e.tripId},[]);return o?(0,n.jsx)(ee.I,{tripId:o,userScrolled:!0,children:(0,n.jsx)(et.G,{hideSidePanel:()=>{},children:(0,n.jsx)(el,{})})}):null},el=()=>{let{tAsString:e}=(0,b.Ay)(),{trip:t}=(0,ee.f)(),{tripActivities:i}=(0,et.y)(),{formattedTrip:a}=(0,ei.A)(t),o=(0,r.useRef)(null);return t?(0,n.jsxs)("div",{className:eo().button,onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.click()},children:[(0,n.jsx)(en.A,{trip:a,tripActivities:i,collapseSidePanel:()=>{},originalTrip:t,className:eo().trip_pdf_button,tooltipPosition:!0,hideTooltip:!0,buttonRef:o}),e("partners.portal.userList.download")]}):null},es={src:"/_next/static/media/basket-white.f852768f.svg",height:25,width:24,blurWidth:0,blurHeight:0};var ed=i(66814);let ec=e=>{let{chatMessage:t}=e,{tAsString:i}=(0,b.Ay)(),{messages:o,selectedItem:l,setSelectedItem:s}=(0,a.Y)(),{showPaywall:d}=(0,v.M)(),c=(0,r.useCallback)(()=>{if((null==l?void 0:l.type)!=="trip"){var e;let i=null==o?void 0:null===(e=o.find(e=>e.index<t.index&&e.tripId))||void 0===e?void 0:e.tripId;if(!i)return null;s({type:"trip",id:i})}(async()=>{for(let e=0;e<5;e++){await new Promise(e=>setTimeout(e,100));let e=document.getElementById(ed.c);if(e){e.click();break}}})()},[o,l,s,t]);return d?null:(0,n.jsx)(K,{onClick:c,colored:!0,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"},children:[(0,n.jsx)(S.A,{src:es,alt:"basket-icon-button",width:16,height:16}),(0,n.jsx)("span",{children:i("trip.tripPopups.tripCart")})]})})},eu={src:"/_next/static/media/Log-In.892f0638.svg",height:16,width:16,blurWidth:0,blurHeight:0},ep=()=>{let{tAsString:e}=(0,b.Ay)(),{isLoggedIn:t,setShowSignupPopup:i}=(0,y.A)(),a=(0,r.useCallback)(()=>{i({open:!0,trigger:"InChatLoginButton"})},[i]);return t?null:(0,n.jsx)(K,{onClick:a,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"},children:[(0,n.jsx)(S.A,{src:eu,alt:"Link icon",width:16,height:16,style:{filter:"brightness(0) invert(1)"}}),(0,n.jsx)("span",{children:e("sidebar.profileMenu.login")})]})})},e_=e=>{var t;let{chatMessage:i}=e;return(0,n.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:"8px",marginBottom:"12px"},children:null===(t=i.commands)||void 0===t?void 0:t.map(e=>(0,n.jsxs)(r.Fragment,{children:[e===Y.ax.Help&&(0,n.jsx)($,{}),e===Y.ax.Login&&(0,n.jsx)(ep,{}),e===Y.ax.BookTrip&&(0,n.jsx)(ec,{chatMessage:i}),e===Y.ax.DownloadTripPdf&&(0,n.jsx)(er,{chatMessage:i})]},e))})};var eh=i(85666);let ev={src:"/_next/static/media/destination-icon.4ba09525.svg",height:16,width:16,blurWidth:0,blurHeight:0},em={src:"/_next/static/media/Point-gray.7d419ba8.svg",height:8,width:7,blurWidth:0,blurHeight:0};var eg=i(68651),ex=i(94495),ef=i(24752),eb=i(8350);let ey=e=>{var t,i,a,o;let{destination:r,destinationsDiscoveryPrompt:l,onClick:s,canAutoplayVideo:d,countOfOtherDestinations:c,eventCardName:u,isLink:p=!1,disableShare:_,playVideoOnHover:h=!1}=e,{tAsString:v}=(0,b.Ay)(),{displayName:m,parentCity:g,imageUrl:x,videos:f}=r,y=r.id,j=null==f?void 0:null===(t=f[0])||void 0===t?void 0:t.thumbnailUrl,C=(null==f?void 0:null===(i=f[0])||void 0===i?void 0:i.m3u8Url)||(null==f?void 0:null===(a=f[0])||void 0===a?void 0:a.mp4Url),w=(0,eg.qH)(r),k=m!==g?m:void 0,A="destination/".concat(y);return(0,n.jsx)(eh.A,{onClick:s,mediaItems:[{imageUrl:j||x,videoUrl:C||void 0}],title:null!=l?l:c?"10+ ".concat(v("topicPage.chatSection.cards.destinations").toLowerCase()):w,type:v(c?"topicPage.chatSection.cards.destinations":"topicPage.chatSection.cards.destination"),typeIcon:ev,tagIcon:k&&em,tagText:k,canAutoplayVideo:d,cardShareUrl:A,isLink:p,eventCardName:u||"",shareButtonsTitle:v("shareButtonsTitle.destinationCards",{url:(0,ef.o)()?"".concat(window.location.origin,"/").concat(A):A}),disableShare:_,eventData:{entityId:null!==(o=r.id)&&void 0!==o?o:"",entityType:eb.n.DESTINATION},playVideoOnHover:h,creditCost:"default",children:(0,n.jsx)(ex.A,{title:v("topicPage.chatSection.cards.open")})})};var ej=i(93564),eC=i(42233),ew=i.n(eC);let ek=e=>{var t,i;let{tripId:o,canAutoplayVideo:l,onClick:s,cachedTripData:d,shareButtonsTitle:c,eventCardName:u,isLink:p=!1,playVideoOnHover:_=!1}=e,{tAsString:h}=(0,b.Ay)(),{user:v}=(0,y.A)(),{chat:m,latestTripCardInfo:g}=(0,a.Y)(),[x,f]=(0,r.useState)(d);(0,r.useEffect)(()=>{(null==v?void 0:v.uid)&&o&&!d&&(0,C.UC)("trips/".concat(o)).then(e=>{e&&f(e)})},[o,d,null==v?void 0:v.uid]);let j=null==x?void 0:x.videos,w=null!==(i=null==x?void 0:null===(t=x.legs[1])||void 0===t?void 0:t.imageUrl)&&void 0!==i?i:"/ItineraryPage/nature-scene.webp",k=null==x?void 0:x.title,A="trip/".concat(o);(0,r.useEffect)(()=>{(null==g?void 0:g.tripId)===o&&k&&(null==m?void 0:m.id)&&m.name!==k&&(0,G.Fm)(m.id,k,!0)},[k,g,o,null==m?void 0:m.id,null==m?void 0:m.name]);let S=(e=>{if(!(null==e?void 0:e.legs)||0===e.legs.length)return null;for(let i of e.legs){var t;if("destination"===i.type&&(null===(t=i.destination)||void 0===t?void 0:t.country))return i.destination.country}return null})(x),P=null==j?void 0:j.map(e=>{var t;return{videoUrl:(null==e?void 0:e.m3u8Url)||(null==e?void 0:e.mp4Url)||void 0,imageUrl:(null==e?void 0:e.thumbnailUrl)||(null==e?void 0:e.startThumbnailUrl)||(null==x?void 0:null===(t=x.imagesUrls)||void 0===t?void 0:t[0])||void 0}});return(0,n.jsxs)("div",{className:ew().container,children:[(0,n.jsx)(eh.A,{onClick:s,title:k,mediaItems:null!=P?P:[],imageUrl:w,canAutoplayVideo:l,type:h("topicPage.chatSection.cards.trip"),typeIcon:ej.A,cardShareUrl:A,eventCardName:u||"",shareButtonsTitle:c,isLink:p,eventData:{entityId:o,entityType:eb.n.TRIP},playVideoOnHover:_,creditCost:"trip",children:(0,n.jsx)(ex.A,{title:h("topicPage.chatSection.cards.open"),onClick:()=>{null==s||s()}})}),(0,n.jsx)("span",{className:ew().learnMoreLink,onClick:()=>null==s?void 0:s(!0),children:S?h("topicPage.chatSection.cards.learnMoreAboutTripTo",{destination:S}):h("topicPage.chatSection.cards.learnMoreAboutTrip",{title:null==x?void 0:x.title})})]})};var eA=i(15747),eS=i(1141),eP=i.n(eS);let eN=e=>{let{destinations:t,destinationsDiscoveryPrompt:i,onClick:a,canAutoplayVideo:o,countOfOtherDestinations:r,eventCardName:l,isLink:s=!1}=e,d=t.length<=3?t:t.slice(0,3);return(0,n.jsx)("div",{className:eP().card_container,style:{position:"relative"},children:(null==d?void 0:d[0])&&(0,n.jsx)(ey,{eventCardName:l,destination:null==d?void 0:d[0],destinationsDiscoveryPrompt:i,onClick:a,canAutoplayVideo:o,isLink:s,countOfOtherDestinations:r,disableShare:!1},(null==d?void 0:d[0].id)||(null==d?void 0:d[0].placeId))})},eT=e=>{var t,i;let{message:a,selectedItem:o,setSelectedItem:r}=e,{tAsString:l}=(0,b.Ay)(),{tripId:s,googleDestinations:d,destinations:u,id:p,destinationsPrompt:_,groupByCountry:h}=a,v=(0,m.A)(),x=!!r,{closeDrawer:f}=(0,c.b)(),{isMobile:y}=(0,g.U)(),j=e=>{var t,i,n,a,l,s;if((null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0)>1&&(null==e?void 0:e.some(e=>e.id||e.placeId))){v({event:"DestinationsClick",data:{destinationsDiscoveryId:null==o?void 0:o.id}}),x&&r({type:"destinationOptions",preloadedDestinationsToDiscover:null==e?void 0:e.filter(e=>!!e.id||!!e.placeId),id:p,preloadedDestinationsToDiscoverPrompt:_,preloadedDestinationsToDiscoverGroupByCountry:h,itemRenderId:Math.random()});return}v({event:"DestinationClick",data:{destinationId:null===(t=e[0])||void 0===t?void 0:t.id}}),x&&(e[0].placeId?r({type:"destination",id:e[0].placeId.toString(),preloadData:{...e[0],id:e[0].placeId,images:[{url:e[0].imageUrl}]},itemRenderId:Math.random()}):r({type:"destination",id:null!==(s=null!==(l=null===(n=e[0].id)||void 0===n?void 0:n.toString())&&void 0!==l?l:null===(a=e[0].placeId)||void 0===a?void 0:a.toString())&&void 0!==s?s:"unknown",preloadData:e[0],itemRenderId:Math.random()}))},C=null!==(i=[...null!==(t=null==u?void 0:u.filter(e=>!e.showOnlyVideos))&&void 0!==t?t:[],...null!=d?d:[]].sort((e,t)=>{var i,n,a,o;let r=null!==(a=null===(i=e.flight)||void 0===i?void 0:i.price)&&void 0!==a?a:0,l=null!==(o=null===(n=t.flight)||void 0===n?void 0:n.price)&&void 0!==o?o:0;return r<l?-1:r>l?1:0}))&&void 0!==i?i:[];return(0,n.jsxs)("div",{children:[!!s&&!!y&&(0,n.jsx)(eA.A,{children:(0,n.jsx)(ek,{eventCardName:eb.I.TRIP,shareButtonsTitle:l("trip.shareButtonsText",{name:l("shareButtonsTitle.trip")}),tripId:s,onClick:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v({event:"TripClick",data:{tripId:s,...e?{isLinkBeneathCardClick:e}:{}}}),f(),x&&(null==o?void 0:o.id)!==s&&r({type:"trip",id:s||""})},cachedTripData:a.tripData,canAutoplayVideo:!0,isLink:!x})}),1===C.length&&(0,n.jsx)(eA.A,{children:(0,n.jsx)(ey,{canAutoplayVideo:!0,eventCardName:eb.I.DESTINATION,destination:C[0],onClick:()=>j(C),isLink:!x},C[0].id||C[0].placeId)}),C.length>1&&(0,n.jsx)(eA.A,{children:(0,n.jsx)(eN,{eventCardName:eb.I.DESTINATION,canAutoplayVideo:!0,destinationsDiscoveryPrompt:_,destinations:C,onClick:()=>j(C),countOfOtherDestinations:C.length>1?C.length:void 0,isLink:!x},C[0].id||C[0].placeId)})]})};var eI=i(60023),eE=i(9426),eR=i.n(eE),eD=i(40900),eM=i(95753);let eL=e=>{let t=/SUBSCRIPTION_GREETING\|tripId=([^\s]+)/,i=e.match(t);return i?{isSubscriptionGreeting:!0,tripId:i[1],message:e.replace(t,"").trim()}:{isSubscriptionGreeting:!1,tripId:null,message:e}};var eB=i(73615),eU=i.n(eB),eH=i(38067);let eF=()=>{let{convertPrice:e,userCurrency:t}=(0,d.c)();return i=>{var n;if(!i||!i.price&&!i.priceInEuros)return null;let{price:a,currency:o}=(0,eH.J)(i),r=null!==(n=e(a,o,t))&&void 0!==n?n:0,l=i.fromCity||i.fromIataName||i.fromStation||"",s=i.toCity||i.toIataName||i.toStation||"",d=i.fromIata?" (".concat(i.fromIata,")"):"",c=i.toIata?" (".concat(i.toIata,")"):"";return{name:"".concat(l).concat(d," ➔ ").concat(s).concat(c),convertedPrice:Math.round(r)}}};var eO=i(28670),eW=i.n(eO),eV=i(86409);let eq=e=>{let{trip:t,formattedTrip:i,disabled:a,btnText:o,btnClass:l,eventLabel:s}=e,{tAsString:c}=(0,b.Ay)(),u=(0,m.A)(),{userCurrency:p,convertPrice:_}=(0,d.c)(),{selectedHotels:h,getSelectedLegRoute:v}=(0,et.y)(),g=eF(),{pseudoUserId:x}=(0,y.A)(),[f,j]=(0,r.useState)(!1),C=(e,t)=>{var i;let n=[];return null==e||null===(i=e.legs)||void 0===i||i.forEach((i,a)=>{var o,r,l,s,d,u,m,x;let f=null==e?void 0:null===(r=e.legs)||void 0===r?void 0:r[(null==e?void 0:null===(o=e.legs)||void 0===o?void 0:o.length)-1];if(a===(null==e?void 0:null===(l=e.legs)||void 0===l?void 0:l.length)-1&&(null==f?void 0:f.type)==="pointOfOrigin"&&(null==e?void 0:null===(s=e.legs)||void 0===s?void 0:s.length)>1)return;let b=t.legs.find(e=>e.endDate===i.endDate),y=t.legs.findIndex(e=>e.endDate===i.endDate),j=v(a+1),C=null==j?void 0:null===(d=j.option)||void 0===d?void 0:d.find(e=>e.details),w=g(null==C?void 0:C.details),k=b&&!b.skipAirportTransfer&&(null===(u=b.airportTransfers)||void 0===u?void 0:u[0]);if(C&&w&&n.push({name:c("trip.transportCheckoutTitle",{name:w.name}),description:c("modals.modifyRoutes.transportOptions.".concat(C.subType)),price:100*w.convertedPrice,quantity:1}),k){let{price:e,currency:t}=(0,eH.J)(k),i=_(e,t,p);n.push({name:c("trip.transferCheckoutTitle",{name:k.name}),description:c("trip.itinerary.transfer.airportTransfer"),price:100*Math.round(i),quantity:1})}let A=null==h?void 0:null===(m=h[y])||void 0===m?void 0:m.currentHotel;A&&(null==i?void 0:null===(x=i.selectedHotel)||void 0===x?void 0:x.id)&&A.convertedPrice&&n.push({name:c("trip.hotelCheckoutTitle",{name:A.name}),description:A.description||"",price:100*A.convertedPrice,quantity:1}),(i.selectedActivities||[]).forEach(e=>{var t;let i=null==b?void 0:null===(t=b.selectedActivities)||void 0===t?void 0:t.find(t=>t.id===e.id);i&&n.push({name:c("trip.activityCheckoutTitle",{name:i.name}),description:i.abstract||"",price:100*i.convertedPrice,quantity:1})})}),n.push({name:c("trip.fee"),price:0,quantity:1}),n},w=async()=>{var e,n;if(a||f)return;j(!0),u({event:null!=s?s:"CheckoutClicked",data:{totalTripAmount:null==t?void 0:null===(e=t.priceInEuros)||void 0===e?void 0:e.total,tripId:t.id}});let o=C(t,i);try{let e=await fetch("/api/checkout_sessions/trip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:o,mode:"payment",currency:p,trip:t.id,pseudoUserId:x})});if(!e.ok){let t=await e.json();console.error("Error creating checkout session:",t),alert("Error: ".concat(t.error));return}let{url:i}=await e.json();u({event:"CheckoutRedirect",data:{checkoutType:"trip_booking",destination:"stripe_checkout_session",tripId:t.id,totalAmount:null==t?void 0:null===(n=t.priceInEuros)||void 0===n?void 0:n.total,currency:p,platform:"web",clickEvent:null!=s?s:"CheckoutClicked"}}),window.location.href=i}catch(e){console.error("An error occurred:",e),alert("An error occurred while initiating checkout.")}finally{j(!1)}};return(0,n.jsx)("button",{onClick:w,className:null!=l?l:eW().book_trip_button,disabled:a||f,children:f?(0,n.jsx)(eV.A,{className:eW().loader}):null!=o?o:c("trip.tripPopups.confirmOrder")})};var eG=i(60006),ez=i(77255);let eQ=e=>{let{htmlParsedMsg:t,isLastMessage:i,plainMessageText:a}=e,{tAsString:o}=(0,b.Ay)(),{trip:r}=(0,ee.f)(),{formattedTrip:l}=(0,ei.A)(r),{firebaseUser:s}=(0,eG.J)(),d=t.replace("{userDisplayName}",(null==s?void 0:s.displayName)?" ".concat(s.displayName):" ".concat(null==s?void 0:s.firstName," ").concat(null==s?void 0:s.lastName).trimEnd()),c=d.includes("\uD83C\uDF89")&&d.includes("Prime");return(0,n.jsxs)("div",{className:(0,x.A)(eR().message_wrapper,{[eR().message_wrapper_assistant]:!0,[eR().message_wrapper_last]:i}),children:[(0,n.jsx)(eD.A,{messageText:a||"",eventCardName:eb.I.MESSAGE,isUserMessage:!1}),(0,n.jsxs)("div",{className:(0,x.A)(eR().message,{[eR().message_assistant]:!0}),children:[c?(0,n.jsx)(ez.x6,{i18nKey:"chatPage.subscription.successMessage",components:{strong:(0,n.jsx)("strong",{}),br:(0,n.jsx)("br",{})}}):(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:d}}),(0,n.jsx)(eq,{formattedTrip:l,trip:r,disabled:!l,btnText:o("topicPage.chatSection.subGreetingMsg.bookTripBtn"),btnClass:eU().book_trip_button,eventLabel:"BookTripChat"})]})]})};var eY=i(45648),eJ=i(84242);let eZ=(0,r.forwardRef)(function(e,t){var i;let{chatMessage:a,isUserMessage:o,isLastMessage:l,messageStyles:s="",assistantMessageStyles:d=""}=e,{character:c,colors:u}=(0,eM.o)(),{locale:p}=(0,w.useRouter)(),{tAsString:_}=(0,b.Ay)(),h=(0,eY.re)(),v=(0,eY.Tz)(),g=(0,eJ.xC)(),f="string"==typeof c.name?c.name:c.name[p||"en"]||c.name.en||b.kI,y=(0,b.pY)((null==a?void 0:a.text)||"",f),{message:j,tripId:C,isSubscriptionGreeting:k}=eL(y),A=_("chatPage.trip.messageGreet"),S=_("chatPage.trip.messageSampleTrip"),P="".concat(A," ").concat(S),N=!o&&j&&j===P,T=(0,r.useMemo)(()=>{if(!j)return"";if(o)return j.replace(/\n/g,"<br/>");let e=j.replace(/\\n/g,"\n");return(0,eI.qg)(e,{async:!1})},[j,o]),I=(0,m.A)(),E=async(e,t)=>{if(e.preventDefault(),!t){console.error("Invalid href:",t);return}try{let e=t.startsWith("http")?new URL(t):new URL(t,window.location.origin),i=e.searchParams.get("label");i&&e.searchParams.set("label","".concat(i,"-ChatHotelLink"));let n=t.toLowerCase().includes("kayak"),a=t.toLowerCase().includes("booking");if(n||a){let e=a?g(t):t,i=a?t.startsWith("http")?new URL(e):new URL(e,window.location.origin):e;I({event:"ChatHotelLinkClick",data:{link:i.href}}),window.open(i.href,window.navigator.userAgent.includes("iPhone;")?"_self":"_blank");return}let o=t.toLowerCase().includes("viator"),r=t.toLowerCase().includes("getyourguide");if(o||r){let e=o?v(t):h(t),i=t.startsWith("http")?new URL(e):new URL(e,window.location.origin);I({event:"ChatActivityLinkClick",data:{link:i.href}}),window.open(i.href,window.navigator.userAgent.includes("iPhone;")?"_self":"_blank");return}window.open(e.href,window.navigator.userAgent.includes("iPhone;")?"_self":"_blank")}catch(e){console.error("Failed to construct URL:",e,t)}};(0,r.useEffect)(()=>{if("function"==typeof t)return;let e=null==t?void 0:t.current;if(e instanceof HTMLDivElement&&o){let t=e.querySelector("p");if(!t)return;let i=t.offsetWidth,n=window.getComputedStyle(e),a=parseFloat(n.paddingLeft||"0"),o=parseFloat(n.paddingRight||"0");e.clientWidth-a-o>i&&(e.style.maxWidth="".concat(i+a+o,"px"))}},[T]);let R=(0,r.useMemo)(()=>{if(!(null==u?void 0:u.primary))return 0;let e=u.primary.replace("#","");return(.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16))/255},[u]);return k&&C?(0,n.jsx)(ee.I,{tripId:C,userScrolled:!0,children:(0,n.jsx)(et.G,{hideSidePanel:()=>{},children:(0,n.jsx)(eQ,{htmlParsedMsg:T,isLastMessage:l,plainMessageText:j})})},C):N?null:(null!==(i=null==y?void 0:y.length)&&void 0!==i?i:0)>0&&(0,n.jsxs)("div",{className:(0,x.A)(eR().message_wrapper,{[eR().message_wrapper_assistant]:!o,[eR().message_wrapper_user]:o,[eR().message_wrapper_last]:l}),children:[(0,n.jsxs)("div",{ref:t,className:(0,x.A)(eR().message,{[eR().message_user]:o,[eR().message_user_dark]:o&&R>.6,[eR().message_assistant]:!o,[s]:s,[d]:d&&!o,[eR().transparent_background]:!o}),onClick:e=>{let t=e.target;"A"===t.tagName.toUpperCase()&&E(e,t.getAttribute("href"))},children:[(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:T}}),(0,n.jsx)("div",{className:"".concat(eR().copyButtonWrapper," ").concat(l&&eR().last_message),children:!o&&(0,n.jsx)(eD.A,{messageText:j||"",eventCardName:eb.I.MESSAGE,isUserMessage:o})})]}),(0,n.jsx)("div",{className:"".concat(eR().copyButtonWrapper," ").concat(eR().user_message),children:o&&(0,n.jsx)(eD.A,{messageText:j||"",eventCardName:eb.I.MESSAGE,isUserMessage:o})})]})});var eX=i(72111);let eK=(0,r.memo)(()=>{let{tAsString:e}=(0,b.Ay)(),{sendMessage:t}=(0,a.Y)(),[i,o]=(0,r.useState)(!1),l=e("chatPage.trip.messageGreet"),s=e("chatPage.trip.messageSampleTrip"),d=e("chatPage.trip.messageStyleAndBudget"),c=[e("chatPage.trip.replies.0"),e("chatPage.trip.replies.1"),e("chatPage.trip.replies.2")],u=(0,r.useCallback)(async e=>{o(!0),await t(e,!1),o(!1)},[t]);return(0,n.jsxs)("div",{className:"px-8 pt-8 mb-auto w-full",children:[(0,n.jsx)("div",{className:"text-foreground text-3xl font-semibold",children:l}),(0,n.jsxs)("div",{className:"mt-5",children:[(0,n.jsx)("div",{className:"text-muted-foreground text-xl",children:s}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{className:"text-muted-foreground text-xl",children:d})]}),(0,n.jsx)("div",{className:"mt-8 gap-3 flex flex-col",children:c.map(e=>{let[t,...a]=e.split(" "),o=a.join(" ");return(0,n.jsx)(eX.$,{variant:"outline",className:"w-fit",onClick:()=>u(o),disabled:i,leftIcon:(0,n.jsx)("span",{children:t}),children:o},e)})})]})});var e$=i(29306);let e0=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];(0,r.useEffect)(()=>{let n=t&&document.getElementById(t),a=e||n||document;if(!i||!a)return;let o=()=>a?Array.from(a.querySelectorAll("video")):[],r=e=>{let t=e.getBoundingClientRect();return Math.abs(t.top+t.height/2-window.innerHeight/2)},l=()=>{let e=o(),t=null,i=1/0;e.forEach(e=>{let n=r(e);n<i&&(i=n,t=e)}),e.forEach(e=>{if(!e)return;let i=(0,e$.sQ)(e);e!==t?i&&e.pause():i||e.play().catch(e=>{console.warn("Could not play the video automatically:",e)})})};return a.addEventListener("scroll",l),l(),()=>a.removeEventListener("scroll",l)},[e,t,i])},e1=e=>{let{container:t,velocityThreshold:i=500,minTimeDiff:n=20,showDelay:a=30,defaultVisible:o=!0,ignoreProgrammaticScroll:l=!1}=e,[s,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),p=(0,r.useRef)(0),_=(0,r.useRef)(Date.now()),h=(0,r.useRef)(void 0),v=(0,r.useRef)(!1),m=(0,r.useRef)(void 0),g=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{if(!t)return;let e=()=>{let e=t.scrollTop,o=Date.now(),r=o-_.current;if(r<n)return;let s=e-p.current,m=1e3*Math.abs(s/r);if(l&&v.current)return;c||u(!0),h.current&&clearTimeout(h.current);let x=g.current&&s>0&&e<=0;g.current=e<=0,s>0&&!x?d(!1):m>i&&(h.current=setTimeout(()=>{d(!0)},a)),p.current=e,_.current=o};return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e),h.current&&clearTimeout(h.current),m.current&&clearTimeout(m.current)}},[i,n,a,t,c,l]),{isScrollingUp:s,isVisible:c?s:o,markProgrammaticScroll:()=>{v.current=!0,m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{v.current=!1},1e3)}}};var e5=i(68647),e8=i(32156),e2=i.n(e8);let e4=()=>(0,n.jsxs)("div",{className:e2().chat_container,children:[(0,n.jsx)("div",{className:e2().chat_head,children:(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"7px"},variant:"rounded",width:"40%",height:16})}),(0,n.jsxs)("div",{className:e2().chat,children:[(0,n.jsxs)("div",{className:e2().chat_messages,children:[(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"12px",maxHeight:"72px"},variant:"rounded",width:"75%",height:"100%"}),(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"12px",maxHeight:"50px",ml:"auto"},variant:"rounded",width:"30%",height:"100%"}),(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"12px",maxHeight:"80px"},variant:"rounded",width:"75%",height:"100%"}),(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"16px",maxHeight:"361px"},variant:"rounded",width:"40%",height:"100%"}),(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"12px",maxHeight:"50px",ml:"auto"},variant:"rounded",width:"30%",height:"100%"})]}),(0,n.jsxs)("div",{className:e2().chat_bottom,children:[(0,n.jsxs)("div",{className:e2().chat_bottom_options,children:[(0,n.jsx)(e5.A,{animation:"wave",variant:"rounded",width:"15%",height:38}),(0,n.jsx)(e5.A,{animation:"wave",variant:"rounded",width:"20%",height:38}),(0,n.jsx)(e5.A,{animation:"wave",variant:"rounded",width:"18%",height:38})]}),(0,n.jsx)(e5.A,{animation:"wave",sx:{borderRadius:"10px"},variant:"rounded",width:"100%",height:50})]})]})]});var e6=i(25508),e3=i(83150),e9=i.n(e3),e7=i(56330),te=i(60981);let tt=e=>{var t,i;let{conversation:o,isQuickReply:l,toggleExpandSidePanel:d,setHasScroll:c}=e,{tAsString:u}=(0,b.Ay)(),{subscription:p,pricesCurrencyCorrected:_,userSubscriptionCategory:h}=(0,s.R)(),{selectedItem:m,setSelectedItem:g,chat:x}=(0,a.Y)(),{displayPaywall:f}=(0,v.M)(),y=_.find(e=>"true"===e.metadata.free_trial),j="early_trial_canceller"===h,C=j?(0,e6.EB)(p):void 0,w="previous_subscriber"===h,k=()=>{f(!0,"default")},A=e=>{let t="text"===(0,G.Am)(e);if(!y||p&&!j&&!w||!(null==x?void 0:x.lockedAt)||!t||e.isUserMessage)return!1;let i=x.lockedAt._seconds||x.lockedAt.seconds;return(e.createdAt._seconds||e.createdAt.seconds)>i},S=(0,r.useRef)(null),[P,N]=(0,r.useState)(!0),[T,I]=(0,r.useState)(!1),E=!!m,R=(0,r.useMemo)(()=>{var e;return null==o?void 0:null===(e=o.filter(e=>!e.isUserMessage).slice(-1))||void 0===e?void 0:e[0]},[o]),D=(null==R?void 0:R.text)||"",M=[...null!=o?o:[]].reverse().findIndex(e=>e.isUserMessage),L=null!==(t=null==o?void 0:o.length)&&void 0!==t?t:0,B=u("chatPage.trip.messageGreet"),U=u("chatPage.trip.messageSampleTrip"),H="".concat(B," ").concat(U),F=null==o?void 0:o[(null!==(i=null==o?void 0:o.length)&&void 0!==i?i:0)-1],O=F&&!F.isUserMessage&&F.text===H,{markProgrammaticScroll:W}=e1({container:S.current,velocityThreshold:600,ignoreProgrammaticScroll:!0});e0(null==S?void 0:S.current,null,!E);let V=()=>{if(!S.current)return!0;let e=S.current;return e.scrollHeight-e.scrollTop-e.clientHeight<=10},q=()=>{if(!S.current)return;W();let e=S.current;e.scrollTop=e.scrollHeight},z=()=>{var e;S.current&&!((null!==(e=null==o?void 0:o.length)&&void 0!==e?e:-1)<1)&&(!T||V())&&q()};return(0,r.useEffect)(()=>{let e=S.current;if(!e)return;let t=()=>{V()?I(!1):I(!0),c(e.scrollHeight>e.clientHeight)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[c]),(0,r.useEffect)(()=>{var e;if(!((null!==(e=null==o?void 0:o.length)&&void 0!==e?e:-1)<1)){if(P){q(),N(!1),I(!1);return}requestAnimationFrame(()=>{z()})}},[null==o?void 0:o.length,l,-1!==M?L-1-M:-1]),(0,r.useEffect)(()=>{S.current&&(S.current.scrollTop=S.current.scrollHeight,N(!0),I(!1))},[null==x?void 0:x.id]),(0,r.useEffect)(()=>{D&&!P&&requestAnimationFrame(()=>{z()})},[D,P]),(0,n.jsxs)("div",{className:e9().chatSection__chat_snapshot,children:[O&&(0,n.jsx)(eK,{}),o?(0,n.jsx)("div",{ref:S,className:e9().chatSection_inner_container,style:{overflowY:"auto"},children:o&&L>0?o.map((e,t)=>{let{isUserMessage:i}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)(eZ,{isUserMessage:i,chatMessage:e,isLastMessage:e===R}),A(e)&&(0,n.jsx)("div",{style:{marginTop:"8px",marginBottom:"8px",maxWidth:"200px"},children:w?(0,n.jsx)("button",{type:"button",onClick:k,className:e9().trial_button,children:u("paywall.continuePlanning")}):(0,n.jsx)(e7.A,{item:y,isFreeTrial:!j,className:e9().trial_button,btnText:u(j?"paywall.trialBox.reactivateBtn":"paywall.trialBox.btn"),clickEvent:te.y,isTrialReactivation:j,leftTrialDays:C})}),(0,n.jsx)(eT,{toggleExpandSidePanel:d,message:e,nextMessage:t<L-1?o[t+1]:null,setSelectedItem:g,selectedItem:m,conversation:o}),!i&&(0,n.jsx)(e_,{chatMessage:e})]},null==e?void 0:e.id)}):u("topicPage.chatSection.noMessages")}):(0,n.jsx)(e4,{})]})},ti=p()(()=>Promise.resolve().then(i.bind(i,97195)),{loadableGenerated:{webpack:()=>[97195]},ssr:!1}),tn=e=>{var t,i;let{toggleExpandSidePanel:o}=e,{chat:l,messages:s,selectedItem:d}=(0,a.Y)(),{pseudoUserId:c}=(0,y.A)(),{showPopupPaywall:u,closePaywall:p}=(0,v.M)(),{tAsString:_}=(0,b.Ay)(),C=(0,m.A)(),{isBot:w,isMobile:k,fullUrl:A}=(0,g.U)(),[S,P]=(0,r.useState)(!1),N=(0,r.useMemo)(()=>A.origin,[A]),T=null==l?void 0:l.id,I=null==l?void 0:l.isProcessing,E=(0,r.useMemo)(()=>A.pathname.includes("/trip/")&&!A.pathname.includes("/view")&&!A.pathname.includes("/chat/"),[A]),R=(0,r.useCallback)(()=>{p(!0)},[p]),D=(0,r.useMemo)(()=>(0,x.A)(h().scroll,{[h().isScroll]:!k&&S,[h().isNotScroll]:!k&&!1===S}),[S,k]);if((0,r.useEffect)(()=>{T&&c&&C({event:"ChatOpen",data:{chatId:T}})},[T,c]),k&&d)return null;if(k&&!w&&u)return(0,n.jsx)(ti,{onClosePaywall:R,location:"chat",showCloseButton:!0,isPopup:!0});let M=null==s?void 0:s[s.length-1],L=!I&&!!s&&1===s.length&&!!s[0].text,B=!I&&!L&&(null!==(i=null==M?void 0:null===(t=M.quickReplies)||void 0===t?void 0:t.length)&&void 0!==i?i:-1)>0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.A,{metaTitle:_("chatPage.seo.metaTitle"),metaDescription:_("chatPage.seo.metaDescription"),name:_("chatPage.title"),url:"".concat(N,"/chat"),canonical:A.toString()}),(0,n.jsx)(j.Af,{type:"chat",strategy:"none",children:(0,n.jsxs)("div",{className:h().chat_container,children:[(0,n.jsx)(tt,{conversation:null!=s?s:void 0,isInitialQuickReply:L,isQuickReply:B,toggleExpandSidePanel:o,setHasScroll:P}),L&&(0,n.jsx)(H,{}),I&&(0,n.jsx)(z,{}),(0,n.jsx)("div",{style:k?{}:{padding:"0 16px 0 16px"},children:(0,n.jsx)("div",{className:D,children:(0,n.jsx)(F.A,{toggleExpandSidePanel:o,isChatPage:!0,isTripPage:E,placeholders:E?[_("chatPage.trip.placeholders.0"),_("chatPage.trip.placeholders.1"),_("chatPage.trip.placeholders.2")]:void 0})})}),!k&&(0,n.jsx)(Q.A,{isTripPage:E})]})})]})};var ta=i(69389),to=i(43900),tr=i(5539),tl=i(95018),ts=i(20013),td=i(79818),tc=i(3935),tu=i(61615);class tp extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Trip page error:",e,t)}render(){let{hasError:e,error:t}=this.state;return e?/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent)?this.props.fallback||(0,n.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,n.jsx)("h3",{children:"Something went wrong"}),(0,n.jsx)("p",{children:"Please refresh the page to try again."})]}):(console.error("Desktop error caught by TripErrorBoundary but not showing fallback:",t),this.props.children):this.props.children}constructor(e){super(e),this.state={hasError:!1,error:void 0}}}var t_=i(48060),th=i(19903),tv=i(52813);let tm=new Set;function tg(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,{isMobile:i}=(0,g.U)(),{selectedItem:n,startTracking:o}=(0,a.Y)(),{checkAndShowPaywall:l}=(0,th.k)(),{closePaywall:d,displayPaywall:c}=(0,v.M)(),{authUserId:u}=(0,y.A)(),{subscription:p,trialReactivationPending:_}=(0,s.R)(),h=(0,r.useRef)(!1),m=t||((null==n?void 0:n.type)==="trip"?null==n?void 0:n.id:void 0),x=!!m;(0,r.useEffect)(()=>{if(!e||!u||h.current||_)return;let{showPaywall:t,delay:n}=l?l(!1):{showPaywall:!1,delay:!1},a=!!(t&&x),o=0;if(n&&(o=i?tv.b:tv.V),!a){d();return}let r=setTimeout(()=>{c(),h.current=!0,i&&m&&tm.add(m)},o);return()=>{clearTimeout(r)}},[e,t,null==n?void 0:n.type,null==n?void 0:n.id,u,x,i,o,p,_,l])}var tx=i(37813),tf=i(97025);let tb=p()(()=>Promise.resolve().then(i.bind(i,97195)),{loadableGenerated:{webpack:()=>[97195]},ssr:!1});function ty(e){let{tripId:t,preloadedTrip:i,onHandleCloseRightSidebar:a,toggleExpandSidePanel:o,isRightPanelExpanded:l,setIsExpanded:s,isExpanded:d}=e,[c,u]=(0,r.useState)(!1),{isMobile:p}=(0,g.U)();(0,r.useEffect)(()=>{let e=document.getElementById(tc.L),t=()=>{u(!0),e&&e.removeEventListener("scroll",t)};return e&&e.addEventListener("scroll",t),()=>{e&&e.removeEventListener("scroll",t)}},[]);let _=(0,r.useCallback)(()=>{p?null==a||a():o("close")},[p,o,a]);return t_.O_?(0,n.jsx)(tp,{children:(0,n.jsx)(ee.I,{tripId:t,preloadedTrip:i,userScrolled:c,children:(0,n.jsx)(et.G,{hideSidePanel:_,children:(0,n.jsx)(tj,{onHandleCloseRightSidebar:a,toggleExpandSidePanel:o,isRightPanelExpanded:l,setIsExpanded:s,isExpanded:d})})},t)}):(0,n.jsx)(ee.I,{tripId:t,preloadedTrip:i,userScrolled:c,children:(0,n.jsx)(et.G,{hideSidePanel:_,children:(0,n.jsx)(tj,{onHandleCloseRightSidebar:a,toggleExpandSidePanel:o,isRightPanelExpanded:l,setIsExpanded:s,isExpanded:d})})},t)}function tj(e){let{onHandleCloseRightSidebar:t,toggleExpandSidePanel:i,isRightPanelExpanded:a,setIsExpanded:o,isExpanded:l}=e,{trip:s}=(0,ee.f)(),[d,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),_=s&&s.id?s:u,h=(0,tf.Fn)(_),m=null==_?void 0:_.isSummary,{showPaywall:x,showPopupPaywall:f,closePaywall:b}=(0,v.M)(),{isBot:y,isMobile:j}=(0,g.U)();tg(h&&!m&&!!(null==_?void 0:_.id),null==_?void 0:_.id);let C=(0,r.useCallback)(e=>{f?b(!0,!0===e):(b(!1,!0===e),j&&t())},[f,b,j,t]);return((0,r.useEffect)(()=>{s&&s.id&&s.travelers&&Array.isArray(s.travelers)&&p(s)},[s]),(null!==s||u)&&_&&_.id&&_.travelers&&Array.isArray(_.travelers))?(0,n.jsxs)(n.Fragment,{children:[(()=>{if(!y&&f)return(0,n.jsx)(tb,{onClosePaywall:C,location:"side-panel",showCloseButton:!0,isPopup:!0});let e=(null==_?void 0:_.id)||"";return!y&&x&&e&&(0,n.jsx)(tb,{onClosePaywall:C,location:"side-panel",showCloseButton:!1,isPopup:!1})})(),(0,n.jsx)(tl.A,{cachedTripData:_}),(0,n.jsx)(td.A,{onClose:t,toggleExpandSidePanel:i,isRightPanelExpanded:a,masterBuilder:e=>(0,n.jsx)(ts.A,{trip:_,toggleExpandSidePanel:i,onClose:t,isRightPanelExpanded:a,isExpanded:l,setIsExpanded:o,showDetailsModal:d,setShowDetailsModal:c,onItemSelect:e}),masterHeaderBuilder:()=>window.location.pathname.includes("/view")?(0,n.jsx)(tx.A,{trip:_,toggleExpandSidePanel:i,isRightPanelExpanded:a}):null,detailsBuilder:(e,t,i)=>(0,n.jsx)(tu.k,{destination:e,onClose:i,onItemSelect:t})})]}):(0,n.jsx)(tr.A,{})}let tC=p()(()=>Promise.resolve().then(i.bind(i,97195)),{loadableGenerated:{webpack:()=>[97195]},ssr:!1}),tw=p()(()=>Promise.all([i.e(1656),i.e(5865),i.e(9379)]).then(i.bind(i,69379)),{loadableGenerated:{webpack:()=>[69379]},ssr:!0}),tk=p()(()=>Promise.all([i.e(1656),i.e(5865),i.e(2217)]).then(i.bind(i,82217)),{loadableGenerated:{webpack:()=>[82217]},ssr:!0}),tA=e=>{let t,{toggleExpandSidePanel:i,isRightPanelExpanded:o,isSidebarExpanded:l,setIsExpanded:s,setIsSelectedItem:d}=e,{selectedItem:c,setSelectedItem:u}=(0,a.Y)(),{authUserId:p,user:_}=(0,y.A)(),{showPaywall:h,showPopupPaywall:m,closePaywall:x}=(0,v.M)(),{userLocation:f}=(0,to.B)(),{isBot:b,isMobile:j}=(0,g.U)(),C=()=>{i("close"),u(null)};(0,r.useEffect)(()=>(c&&d&&d(!0),c?()=>{d&&d(!1)}:()=>{}),[c]),(0,r.useEffect)(()=>{c&&p&&f&&(0,ta.b)(c,p||void 0,_||void 0,f||void 0)},[c,p,f,_]);let w=(null==c?void 0:c.type)==="destinationOptions"?c.preloadedDestinationsToDiscover:void 0,k=(null==c?void 0:c.type)==="destination"?null==c?void 0:c.id:null,A=(null==c?void 0:c.type)==="destination"?null==c?void 0:c.placeId:null,S="dest-".concat(k||A||"unknown","-").concat((null==c?void 0:c.itemRenderId)||"static"),P=null==c?void 0:c.preloadedDestinationsToDiscoverPrompt,N=(null==c?void 0:c.type)==="trip"?null==c?void 0:c.id:null,T=e=>{m?x(!0,!0===e):(x(!1,!0===e),j&&C())},I=e=>!b&&m?(0,n.jsx)(tC,{onClosePaywall:T,location:e,showCloseButton:!0,isPopup:!0}):!b&&h&&N&&(0,n.jsx)(tC,{onClosePaywall:T,location:e,showCloseButton:!1,isPopup:!1});return N?(0,n.jsxs)(n.Fragment,{children:[I("side-panel"),(0,n.jsx)(ty,{tripId:N,preloadedTrip:null==c?void 0:c.preloadData,toggleExpandSidePanel:i,isRightPanelExpanded:o,onHandleCloseRightSidebar:C,setIsExpanded:s,isExpanded:l},null==c?void 0:c.itemRenderId)]}):k||A?(0,n.jsx)(tk,{toggleExpandSidePanel:i,isRightPanelExpanded:o,destinationId:k||void 0,destinationPlaceId:A||void 0,preloadedDestination:c.preloadData,preloadedDestinationDescription:null==c?void 0:c.preloadedDestinationDescription,onHandleCloseRightSidebar:C,addCardToChat:null==c?void 0:c.addCardToChat},S):(t=(null==c?void 0:c.type)==="destinationOptions"?"destinations":"empty",(0,n.jsxs)(n.Fragment,{children:[I("side-panel"),(0,n.jsx)(tw,{entity:t,startFirebaseStream:null==c?void 0:c.startFirebaseStream,destinationsToDiscover:w,destinationsToDiscoverPrompt:P,destinationsToDiscoverGroupByCountry:null==c?void 0:c.preloadedDestinationsToDiscoverGroupByCountry,toggleExpandSidePanel:i,isRightPanelExpanded:o,onHandleCloseRightSidebar:C},"".concat(t,"-").concat((null==c?void 0:c.id)||"default"))]}))};var tS=i(21738),tP=i(77222),tN=i(84774),tT=i.n(tN);function tI(e){let{onClose:t,masterBuilder:i,masterHeaderBuilder:o,detailsHeaderBuilder:l,detailsBuilder:s,contentIsBelowHeader:d=!1,detailsContentIsBelowHeader:c,hideButtons:u=!1,forceTrip:p=!1}=e,[_,h]=(0,r.useState)([]),{selectedItem:v}=(0,a.Y)(),m=p||(null==v?void 0:v.type)==="trip",{isMobile:f}=(0,g.U)(),b=(0,r.useCallback)(e=>{h(t=>[...t,e])},[]),y=(0,r.useRef)(null),j=()=>{h(e=>e.length<=0?(t(),e):e.slice(0,-1))},C=_.length>0?_[_.length-1]:null,w=(0,r.useMemo)(()=>i(b,t),[i,b,t]),k=(0,r.useMemo)(()=>{var e;return null!==(e=null==o?void 0:o())&&void 0!==e?e:null},[o]),A=C?null==c?void 0:c(C):d,S=(0,x.A)(tT().header_component,!u&&tT().trip_header_component),P=(0,x.A)(tT().container,m&&tT().container_trip),N=(0,x.A)(A?tT().content_wrapper_below_header:tT().content_wrapper,m&&tT().content_wrapper_trip);return(0,n.jsxs)("div",{className:P,children:[!u&&f&&!m&&(0,n.jsx)(tP.A,{id:"closeRightSidebarButtonMobile",onClick:j,position:"left",customStyles:tT().close_button_mobile_position}),!u&&!f&&!m&&(()=>{if(!m)return(0,n.jsx)("div",{className:tT().trip_buttons_container,children:(0,n.jsx)(tP.A,{id:"closeRightSidebarButtonNonTrip",onClick:j,position:"left",customStyles:tT().trip_close_button})})})(),(0,n.jsx)("div",{id:"side-panel-header",children:(0,n.jsx)("div",{className:C||k?S:"",children:C?null==l?void 0:l(C):k})}),(0,n.jsx)("div",{className:N,id:tc.L,ref:y,children:C?null==s?void 0:s(C,b,j):w})]})}var tE=i(77749),tR=i(24584),tD=i.n(tR),tM=i(11233);function tL(e){var t,i,a;let{trip:o}=e,{tAsString:r}=(0,b.Ay)(),{showPaywall:l}=(0,v.M)(),s=(0,m.A)(),d="".concat(window.location.origin,"/trip/").concat(o.id),c=(null==o?void 0:o.videos)&&(null==o?void 0:null===(t=o.videos)||void 0===t?void 0:t.length)>0?null==o?void 0:null===(a=o.videos)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.thumbnailUrl:null;return(0,n.jsxs)("div",{className:tD().container,children:[l&&(0,n.jsx)(tB,{trip:o}),(0,n.jsxs)("div",{className:tD().actions_container,children:[(0,n.jsx)(tM.A,{tripId:o.id,tripSlug:o.title.toLowerCase().replace(/\s+/g,"-"),className:tD().edit_trip_button}),(0,n.jsx)(tE.A,{shareUrl:d,itineraryTitle:null==o?void 0:o.title,locationImgUrl:c||"",eventCardName:eb.I.TRIP,shareButtonsTitle:r("trip.shareButtonsText",{name:r("shareButtonsTitle.trip")}),onClick:()=>{s({event:"OpenPopupTripShare",data:{tripId:o.id}})},eventData:{entityId:o.id,entityType:eb.n.TRIP}})]})]})}let tB=e=>{var t;let{trip:i}=e,{locale:a}=(0,w.useRouter)(),{tAsString:o}=(0,b.Ay)(),r=null==i?void 0:null===(t=i.legs[(null==i?void 0:i.legs.length)-1])||void 0===t?void 0:t.endDate;return(0,n.jsxs)("div",{className:tD().title_and_details,children:[(0,n.jsx)("h1",{className:tD().title_content_title,children:i.title}),(0,n.jsxs)("button",{className:tD().trip_details_button,children:[(0,n.jsx)("small",{children:(0,tf.uh)(new Date(i.startDate),new Date(r||i.endDate),a)}),(0,n.jsx)("span",{className:tD().dots,children:"•"})," ",(0,n.jsx)("small",{children:o("trip.tripPopups.travellers",{count:i.travelers.length})})," ",(0,n.jsx)("span",{className:tD().dots,children:"•"})," ",(0,n.jsxs)("small",{children:[i.numberOfRooms," ",o(i.numberOfRooms>1?"trip.tripPopups.rooms":"trip.tripPopups.room")]})]})]})},tU=p()(()=>Promise.resolve().then(i.bind(i,97195)),{loadableGenerated:{webpack:()=>[97195]},ssr:!1});function tH(e){let{tripId:t,preloadedTrip:i,onHandleCloseRightSidebar:a,toggleExpandSidePanel:o,isRightPanelExpanded:l,setIsExpanded:s,isExpanded:d}=e,[c,u]=(0,r.useState)(!1),{isMobile:p}=(0,g.U)();(0,r.useEffect)(()=>{let e=document.getElementById(tc.L),t=()=>{u(!0),e&&e.removeEventListener("scroll",t)};return e&&e.addEventListener("scroll",t),()=>{e&&e.removeEventListener("scroll",t)}},[]);let _=(0,r.useCallback)(()=>{p?null==a||a():o("close")},[p,o,a]);return t_.O_?(0,n.jsx)(tp,{children:(0,n.jsx)(ee.I,{tripId:t,preloadedTrip:i,userScrolled:c,children:(0,n.jsx)(et.G,{hideSidePanel:_,children:(0,n.jsx)(tF,{onHandleCloseRightSidebar:a,toggleExpandSidePanel:o,isRightPanelExpanded:l,setIsExpanded:s,isExpanded:d})})},t)}):(0,n.jsx)(ee.I,{tripId:t,preloadedTrip:i,userScrolled:c,children:(0,n.jsx)(et.G,{hideSidePanel:_,children:(0,n.jsx)(tF,{onHandleCloseRightSidebar:a,toggleExpandSidePanel:o,isRightPanelExpanded:l,setIsExpanded:s,isExpanded:d})})},t)}function tF(e){let{onHandleCloseRightSidebar:t,toggleExpandSidePanel:i,isRightPanelExpanded:a,setIsExpanded:o,isExpanded:l}=e,{trip:s}=(0,ee.f)(),[d,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),_=s&&s.id?s:u,{showPaywall:h,showPopupPaywall:m,closePaywall:x}=(0,v.M)(),{isBot:f,isMobile:b}=(0,g.U)(),y=(0,r.useCallback)(e=>{m?x(!0,!0===e):(x(!1,e),b&&t())},[m,x,b,t]);return((0,r.useEffect)(()=>{s&&s.id&&s.travelers&&Array.isArray(s.travelers)&&p(s)},[s]),tg((0,tf.Fn)(_),null==_?void 0:_.id),(null!==s||u)&&_&&_.id&&_.travelers&&Array.isArray(_.travelers))?(0,n.jsxs)(n.Fragment,{children:[(()=>{if(!f&&m)return(0,n.jsx)(tU,{onClosePaywall:y,location:"side-panel",showCloseButton:!0,isPopup:!0});let e=(null==_?void 0:_.id)||"";return!f&&h&&e&&(0,n.jsx)(tU,{onClosePaywall:y,location:"side-panel",showCloseButton:!1,isPopup:!1,tripId:e})})(),(0,n.jsx)(tl.A,{cachedTripData:_}),(0,n.jsx)(tI,{onClose:t,toggleExpandSidePanel:i,isRightPanelExpanded:a,hideButtons:!0,forceTrip:!0,masterBuilder:e=>(0,n.jsx)(ts.A,{trip:_,toggleExpandSidePanel:i,onClose:t,isRightPanelExpanded:a,isExpanded:l,setIsExpanded:o,showDetailsModal:d,setShowDetailsModal:c,onItemSelect:e}),masterHeaderBuilder:()=>window.location.pathname.includes("/view")?(0,n.jsx)(tL,{trip:_,toggleExpandSidePanel:i,isRightPanelExpanded:a}):null,detailsBuilder:(e,t,i)=>(0,n.jsx)(tu.k,{destination:e,onClose:i,onItemSelect:t})})]}):(0,n.jsx)(tS.A,{})}let tO=p()(()=>Promise.all([i.e(1656),i.e(5865),i.e(9379)]).then(i.bind(i,69379)),{loadableGenerated:{webpack:()=>[69379]},ssr:!0}),tW=p()(()=>Promise.all([i.e(1656),i.e(5865),i.e(2217)]).then(i.bind(i,82217)),{loadableGenerated:{webpack:()=>[82217]},ssr:!0}),tV=p()(()=>Promise.all([i.e(7075),i.e(8523)]).then(i.bind(i,28523)),{loadableGenerated:{webpack:()=>[28523]},ssr:!1}),tq=e=>{let{toggleExpandSidePanel:t,isRightPanelExpanded:i,isSidebarExpanded:o,setIsExpanded:l,setIsSelectedItem:s}=e,{selectedItem:d,setSelectedItem:u,messages:p,chat:_}=(0,a.Y)(),{authUserId:h,user:v}=(0,y.A)(),{openDrawer:m,closeDrawer:g,setRightPanelRef:x,isDrawerOpen:f,drawerContent:b}=(0,c.b)(),j=(0,r.useRef)(null),[C,w]=(0,r.useState)(!1),k=(0,r.useRef)(i),A=(0,r.useRef)(!1),S=(0,r.useMemo)(()=>{if(!p||0===p.length)return null;for(let e=p.length-1;e>=0;e--){let t=p[e];if(t.tripId)return t.tripId}return null},[p]),{userLocation:P}=(0,to.B)();(0,r.useEffect)(()=>{x(j.current)},[x]),(0,r.useEffect)(()=>{f&&g()},[null==_?void 0:_.id]),(0,r.useEffect)(()=>{f&&S&&g()},[S]),(0,r.useEffect)(()=>(d&&(null==s||s(!0)),d?()=>null==s?void 0:s(!1):()=>{}),[d]),(0,r.useEffect)(()=>{d&&h&&P&&(0,ta.b)(d,h||void 0,v||void 0,P||void 0)},[d,h,P,v]),(0,r.useEffect)(()=>{f||w(!1)},[f]),(0,r.useEffect)(()=>{k.current!==i&&(A.current=!0,setTimeout(()=>{A.current=!1},100)),k.current=i},[i]),(0,r.useEffect)(()=>{if(d&&!C&&!A.current){if("trip"===d.type&&f){g();return}if("destination"===d.type){let e="dest-".concat(d.id||d.placeId||"unknown","-").concat(d.itemRenderId||"static");m((0,n.jsx)(n.Fragment,{children:(0,n.jsx)(tW,{toggleExpandSidePanel:t,isRightPanelExpanded:i,destinationId:d.id,destinationPlaceId:d.placeId,preloadedDestination:d.preloadData,preloadedDestinationDescription:d.preloadedDestinationDescription,onHandleCloseRightSidebar:g,addCardToChat:d.addCardToChat},e)}));return}if(d.type&&["destinationOptions"].includes(d.type)){let e="flights";"destinationOptions"===d.type&&(e="destinations");let a="destinationOptions"===d.type?d.preloadedDestinationsToDiscover:void 0,o=d.preloadedDestinationsToDiscoverPrompt;m((0,n.jsx)(n.Fragment,{children:(0,n.jsx)(tO,{entity:e,startFirebaseStream:null==d?void 0:d.startFirebaseStream,destinationsToDiscover:a,destinationsToDiscoverPrompt:o,destinationsToDiscoverGroupByCountry:null==d?void 0:d.preloadedDestinationsToDiscoverGroupByCountry,toggleExpandSidePanel:t,isRightPanelExpanded:i,onHandleCloseRightSidebar:g},"".concat(e,"-").concat(null==N?void 0:N.type,"-").concat((null==N?void 0:N.id)||"default"))}))}}},[d,m,g,i]);let N=d,T=(null==N?void 0:N.type)==="trip"?null==N?void 0:N.id:null,I=!!(T||S),E=T||S||"",R=T&&T===(null==N?void 0:N.id)?null==N?void 0:N.preloadData:{},D=E?"trip-".concat(E):"trip-empty";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:j,style:{width:"100%",height:"100%"},children:I?(0,n.jsx)(tH,{tripId:E,preloadedTrip:R,onHandleCloseRightSidebar:()=>{if(f){g(),u(null);return}t("close"),u(null)},toggleExpandSidePanel:t,isRightPanelExpanded:i,setIsExpanded:l,isExpanded:o},D):(0,n.jsx)(tS.A,{shouldRenderPaywall:!0})}),(0,n.jsx)(tV,{isOpen:f,onClose:()=>{w(!0),g(),u(null)},children:b})]})},tG=e=>(0,n.jsx)(tq,{...e});var tz=i(39137),tQ=i(61409),tY=i(11892),tJ=i.n(tY);let tZ={src:"/_next/static/media/Icon-Close.4ddde40d.svg",height:32,width:32,blurWidth:0,blurHeight:0},tX=e=>{let{onClose:t}=e,{tAsString:i}=(0,b.Ay)(),{isMobile:a}=(0,g.U)();return(0,n.jsx)("div",{className:tJ().container,onClick:e=>e.stopPropagation(),children:(0,n.jsxs)("div",{className:tJ().wrapper,children:[(0,n.jsx)("div",{className:tJ().close_button,onClick:t,children:(0,n.jsx)(S.A,{src:tZ,alt:"close window",width:24,height:24})}),(0,n.jsxs)("div",{className:tJ().block_images,children:[(0,n.jsx)(S.A,{src:"/nochki.svg",alt:"icon",width:70,height:69}),(0,n.jsx)(S.A,{src:"/Handshake.svg",alt:"icon",width:40.8,height:40.8}),(0,n.jsx)(q.A,{size:a?40:69})]}),(0,n.jsxs)("div",{className:tJ().block_text,children:[(0,n.jsxs)("p",{className:tJ().title,children:[i("chatPage.tripplanner.title"),(0,n.jsx)("span",{className:tJ().titleSpan,children:" Layla"})]}),(0,n.jsx)("p",{className:tJ().description,children:i("chatPage.tripplanner.description")})]})]})})};var tK=i(64367),t$=i(8305),t0=i(34588);let t1=e=>{let{children:t,initialSelectedItem:i}=e,{query:o}=(0,w.useRouter)(),{isMobile:l}=(0,g.U)(),{showPaywall:s}=(0,v.M)(),{selectedItem:d,chat:c}=(0,a.Y)(),{isLoading:u,loaderText:p}=(0,t$.A)(),[_,m]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!!i),{utm_medium:A}=o,S=(0,r.useCallback)(()=>{setTimeout(()=>{tQ.oR.dismiss()},5e3)},[]),P=(0,r.useCallback)(()=>{tQ.oR.info((0,n.jsx)(tX,{onClose:()=>{tQ.oR.dismiss()}}),{position:"bottom-center",style:{position:"fixed",bottom:"20px",zIndex:"1000",color:"transparent",height:"225px",width:"100%"},transition:tQ.q7,hideProgressBar:!0,draggable:!1}),S()},[S]);(0,r.useEffect)(()=>{"tripplanner"===A&&P()},[A,P]),(0,r.useEffect)(()=>{(null==c?void 0:c.id)&&_&&m(!1)},[null==c?void 0:c.id,d]);let N=e=>{if("close"===e&&_){m(!1);return}"close"!==e&&m(!_)},T=(0,x.A)(h().firstClass,{[h().not_animated_page]:C&&y&&l,[h().layout_right_sidebar_not_expanded_not_trip]:!0,[h().isRightPanelExpandedWithoutTrip]:_,[h().layout_right_sidebar_v2]:!l,[h().mobile_hidden]:l&&!d}),I=(0,x.A)({[h().chat_section_is_trip]:!_,[h().chat_section_expanded]:_}),E=(0,x.A)(h().layout_right_sidebar,h().layout_right_sidebar_show,{[h().show_paywall]:s}),R=(0,x.A)(h().container,{[h().containerFixed]:l&&!d});return(0,n.jsxs)(tz.A,{contentContainerClassname:R,showFooter:!1,children:[(0,n.jsxs)("section",{className:I,children:[t,(0,n.jsx)(tn,{toggleExpandSidePanel:N})]}),(0,n.jsx)("div",{id:t0.J,className:T,style:d&&l?{position:"absolute",width:"100%",maxWidth:"100%",minWidth:320,top:0,height:"100%",zIndex:1001}:void 0,children:(0,n.jsx)("div",{id:t0.m,className:E,children:l?(0,n.jsx)(tA,{toggleExpandSidePanel:N,isRightPanelExpanded:_,isSidebarExpanded:f,setIsExpanded:b,setIsSelectedItem:e=>{(0,r.startTransition)(()=>{j(e),e||k(!1)})}}):(0,n.jsx)(tG,{toggleExpandSidePanel:N,isRightPanelExpanded:_,isSidebarExpanded:f,setIsExpanded:b,setIsSelectedItem:e=>{(0,r.startTransition)(()=>{j(e),e||k(!1)})}})})}),(0,n.jsx)(tK.A,{show:u,text:p})]})},t5=e=>{let{children:t,initialSelectedItem:i,preloadedChat:u,preloadedMessages:p,startTracking:_,chatLoadedActions:h,configuration:v}=e,{setStartTracking:m}=(0,s.R)(),{setConfiguration:g}=(0,l._)();return(0,r.useEffect)(()=>{null==m||m(!0)},[m]),(0,r.useEffect)(()=>{v&&g(e=>({...e,...v}))},[v,g]),(0,n.jsx)(d.v,{children:(0,n.jsx)(th.v,{children:(0,n.jsx)(a.r,{initialSelectedItem:i,preloadedChat:u,preloadedMessages:p,initialStartTracking:_,initialChatLoadedActions:h||void 0,children:(0,n.jsx)(o.f,{children:(0,n.jsx)(c.T,{children:(0,n.jsx)(t1,{initialSelectedItem:i,children:t})})})})})})}},95018:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var n=i(74848),a=i(18584),o=i(95753),r=i(66888),l=i(98935),s=i(5104),d=i(13368),c=i.n(d);function u(e){let{type:t="Thing",keyOverride:i,scriptKey:a,scriptId:o,dataArray:r,...l}=e;return(0,n.jsx)(c(),{children:(0,n.jsx)("script",{type:"application/ld+json",id:o,"data-testid":o,dangerouslySetInnerHTML:p(t,void 0===r?{...l}:r)},"jsonld-".concat(a).concat(i?"-".concat(i):""))})}let p=(e,t)=>{let i=t;return Array.isArray(i)&&1===i.length&&(i={...t[0]}),{__html:JSON.stringify(Array.isArray(i)?i.map(t=>_(e,t)):_(e,i),g)}},_=(e,t)=>{let{id:i}=t,n={...i?{"@id":t.id}:{},...t};return delete n.id,{"@context":"https://schema.org","@type":e,...n}},h=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}),v=RegExp("[".concat(Object.keys(h).join(""),"]"),"g"),m=e=>h[e],g=(e,t)=>{switch(typeof t){case"object":if(null===t)return;return t;case"number":case"boolean":case"bigint":return t;case"string":return t.replace(v,m);default:return}};var x=i(46575),f=i(97025),b=i(45552);let y=e=>new Date("seconds"in e?1e3*e.seconds:1e3*e._seconds).toISOString(),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date("2025-09-29T00:00:00Z");return new Date("seconds"in e?1e3*e.seconds:1e3*e._seconds)<t?{seconds:Math.floor(t.getTime()/1e3),nanoseconds:t.getTime()%1e3*1e6}:"seconds"in e?{seconds:e.seconds,nanoseconds:e.nanoseconds||0}:{seconds:e._seconds,nanoseconds:e._nanoseconds||0}};var C=i(96540);function w(e){var t,i,d,p,_,h,v,m,g,w,k,A,S,P,N,T,I,E,R,D,M,L,B,U;let{cachedTripData:H}=e,F=(0,r.A)(),{fullUrl:O}=(0,a.U)(),{origin:W}=O,{seo:V}=(0,o.o)(),{tAsString:q}=(0,l.Ay)(),G=null!==(_=H.title)&&void 0!==_?_:"Meet Layla: AI Travel Agent | Trusted by Millions",z=q("seo.trip.titleSuffix"),Q=H.title?"".concat(H.title,": ").concat(z).length>60?"".concat(H.title,": ").concat(z).substring(0,57)+"...":"".concat(H.title,": ").concat(z):"Meet Layla: AI Travel Agent | Trusted by Millions",Y=q("seo.trip.descriptionPrefix"),J="",Z=H.version===b.sG.V2;if(Z){if((null==H?void 0:H.legs)&&H.legs.length>1)for(let e=1;e<H.legs.length;e++){let t=(null===(v=H.legs[e])||void 0===v?void 0:null===(h=v.description)||void 0===h?void 0:h.replace(/\*/g,""))||"";if(t){J=t;break}}if(!J){let e=(null==H?void 0:null===(w=H.legs)||void 0===w?void 0:null===(g=w[0])||void 0===g?void 0:null===(m=g.description)||void 0===m?void 0:m.replace(/\*/g,""))||"";e&&(J=e)}}else{if((null==H?void 0:H.legs)&&H.legs.length>1)for(let e=1;e<H.legs.length;e++){let t=(null===(P=H.legs[e])||void 0===P?void 0:null===(S=P.itinerary)||void 0===S?void 0:null===(A=S[0])||void 0===A?void 0:null===(k=A.description)||void 0===k?void 0:k.replace(/\*/g,""))||"";if(t){J=t;break}}if(!J){let e=(null==H?void 0:null===(R=H.legs)||void 0===R?void 0:null===(E=R[0])||void 0===E?void 0:null===(I=E.itinerary)||void 0===I?void 0:null===(T=I[0])||void 0===T?void 0:null===(N=T.description)||void 0===N?void 0:N.replace(/\*/g,""))||"";e&&(J=e)}}let X=J?Y+J:"Plan a new trip by chatting with the smartest travel agent. Discover where to go and the best things to do all in one place.",K=X.length>160?X.substring(0,157)+"...":X,$=null!=F?F:W,ee=V.image||"/layla-og-share.webp",et=(0,f.FG)(H),ei=null==et?void 0:et.map(e=>e.location),en=null==et?void 0:et.map(e=>{var t;return null===(t=e.description)||void 0===t?void 0:t.replace(/\*/g,"")}).join("\n"),ea=Z?null==et?void 0:et.map(e=>e.description?(0,x.Ep)(e.description):"").join("\n"):null==et?void 0:et.map(e=>{var t,i;return null!==(i=null==e?void 0:null===(t=e.itinerary)||void 0===t?void 0:t.map(e=>(0,x.Ep)(e.description)).join("\n"))&&void 0!==i?i:""}).join("\n"),eo=(0,C.useMemo)(()=>{var e;return j(null!==(e=null==H?void 0:H.updatedAt)&&void 0!==e?e:{seconds:0,nanoseconds:0})},[null==H?void 0:H.updatedAt]),er={name:G,description:en,touristType:"http://schema.org/Audience",trip:(null==ei?void 0:ei.length)?ei:[],provider:{"@type":"Organization",name:"Layla",url:W},url:$},el={"@context":"https://schema.org/","@type":"Article",author:[{"@type":"Organization",name:"Layla",url:"".concat(W,"/about")}],headline:G,datePublished:H.createdAt?y(H.createdAt):void 0,dateModified:eo?y(eo):void 0,image:null!==(D=H.imagesUrls)&&void 0!==D?D:[ee],video:null!==(M=null===(t=H.videos)||void 0===t?void 0:t.map(e=>e.mp4Url))&&void 0!==M?M:[],articleSection:"Travel",articleBody:ea};return(0,n.jsxs)(n.Fragment,{children:[(null==ei?void 0:ei.length)?(0,n.jsx)(u,{type:"TouristTrip",...er,scriptKey:"trip"}):null,(0,n.jsxs)(c(),{children:[(0,n.jsx)("script",{id:"trip-article",type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(el)}}),(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"WebSite",name:"".concat(G),url:"".concat(F)})}}),(null==H?void 0:H.title)?(0,n.jsx)("title",{children:(0,s.c)(Q)},"title"):null,(0,n.jsx)("link",{rel:"canonical",href:F},"canonical"),(0,n.jsx)("meta",{name:"robots",content:"max-image-preview:large"}),(0,n.jsx)("meta",{name:"description",content:K},"description"),(0,n.jsx)("meta",{name:"thumbnail",content:null!==(L=null==H?void 0:null===(i=H.imagesUrls)||void 0===i?void 0:i[0])&&void 0!==L?L:ee}),(0,n.jsx)("meta",{property:"og:type",content:"article"},"og:type"),(0,n.jsx)("meta",{property:"og:title",content:(0,s.c)(Q)},"og:title"),(0,n.jsx)("meta",{property:"og:url",content:$},"og:url"),(0,n.jsx)("meta",{property:"og:description",content:K},"og:description"),(0,n.jsx)("meta",{property:"og:site_name",content:"Layla - AI Travel Agent"},"og:site_name"),(0,n.jsx)("meta",{property:"og:image",content:null!==(B=null==H?void 0:null===(d=H.imagesUrls)||void 0===d?void 0:d[0])&&void 0!==B?B:"".concat(W,"/theme/layla/seo-image.webp")},"og:image"),(0,n.jsx)("meta",{property:"og:image:width",content:"1200"},"og:image:width"),(0,n.jsx)("meta",{property:"og:image:height",content:"630"},"og:image:height"),(0,n.jsx)("meta",{property:"og:image:alt",content:"".concat(Q," - Layla AI Travel Agent")},"og:image:alt"),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"},"twitter:card"),(0,n.jsx)("meta",{name:"twitter:title",content:(0,s.c)(Q)},"twitter:title"),(0,n.jsx)("meta",{name:"twitter:description",content:K},"twitter:description"),(0,n.jsx)("meta",{name:"twitter:image",content:null!==(U=null==H?void 0:null===(p=H.imagesUrls)||void 0===p?void 0:p[0])&&void 0!==U?U:"".concat(W,"/theme/layla/seo-image.webp")},"twitter:image"),(0,n.jsx)("meta",{name:"twitter:image:alt",content:"".concat(Q," - Layla AI Travel Agent")},"twitter:image:alt")]})]})}},96610:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(74848),a=i(26921),o=i.n(a),r=i(13725);let l=e=>{let{id:t,onClick:i,customStyles:a="",icon:l,iconAlt:s,iconSize:d=20,...c}=e;return(0,n.jsx)("button",{id:t,className:"".concat(o().icon_button," ").concat(a),onClick:i,...c,children:(0,n.jsx)(r.A,{src:l,alt:s,width:d,height:d})})}},85666:(e,t,i)=>{"use strict";i.d(t,{A:()=>N});var n=i(74848),a=i(96540),o=i(91106),r=i.n(o),l=i(13725),s=i(88130),d=i.n(s);let c=e=>{let{typeIcon:t,typeText:i,className:a}=e;return t||i?(0,n.jsxs)("div",{className:a||d().card_type,children:[t&&(0,n.jsx)(l.A,{src:t,alt:"".concat(i,"-icon"),className:d().card_type_icon}),i&&(0,n.jsx)("p",{className:d().card_type_text,children:i})]}):null};var u=i(81441),p=i(8024);let _=i.n(p)().card_tag,h=(0,a.memo)(e=>{let{tagIcon:t,tagText:i,className:a}=e;if(!t&&!i)return null;let o=(0,u.V)(_,a);return(0,n.jsxs)("div",{className:o,children:[t&&(0,n.jsx)(l.A,{src:t,alt:"point-image"}),i&&(0,n.jsx)("p",{children:i})]})});h.displayName="CardTag";var v=i(68647),m=i(18526),g=i(97180),x=i.n(g);let f=x().card_title,b=(0,a.memo)(e=>{let{title:t,moreText:i,className:a}=e;if(null===t)return null;if(void 0===t)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.A,{animation:"wave",variant:"text",width:"100%",height:14}),(0,n.jsx)(v.A,{animation:"wave",variant:"text",width:"100%",height:14})]});let o=(null!=t?t:" ").split(" ").length>10,r=(0,u.V)(f,a);return(0,n.jsxs)("p",{className:r,children:[o?(0,n.jsx)(m.A,{title:t,children:(0,n.jsx)("span",{children:t})}):t,!!i&&(0,n.jsx)("span",{className:x().card_title_more_text,children:i})]})});b.displayName="CardTitle";let y=()=>null;var j=i(40900),C=i(13816),w=i(18584),k=i(29793),A=i(60130),S=i.n(A);let P=(0,a.memo)(e=>{let{type:t,typeIcon:i,mediaItems:a,imageUrl:o,tagIcon:l,tagText:s,tagClassName:d,title:u,titleMoreBannerText:p,onClick:_,children:v,cardShareUrl:m,isExternalUrl:g=!1,shareButtonsTitle:x,eventCardName:f,isLink:A=!1,disableShare:P,eventData:N,className:T,playVideoOnHover:I,extraClass:E,creditCost:R,isChatPage:D=!0}=e,{fullUrl:M}=(0,w.U)(),L=()=>{var e;let r=(0,n.jsxs)("div",{className:S().card_container,children:[(0,n.jsxs)("div",{className:"".concat(S().card," ").concat(T),onClick:()=>null==_?void 0:_(),children:[(0,n.jsx)(c,{typeIcon:i,typeText:t}),R&&(0,n.jsx)(y,{cardType:R}),(0,n.jsxs)("div",{className:S().card_content,children:[(0,n.jsx)(h,{tagIcon:l,tagText:s,className:d}),(0,n.jsx)(k.A,{src:(null==a?void 0:null===(e=a[0])||void 0===e?void 0:e.imageUrl)||o||"/ItineraryPage/nature-scene.webp",alt:null!=u?u:"image",width:135,height:130,className:"".concat(S().card__front_image," ").concat(E),onError:e=>{let{currentTarget:t}=e;t.src===o?(t.onerror=null,t.src="/ItineraryPage/nature-scene.webp"):o?t.src=o:(t.onerror=null,t.src="/ItineraryPage/nature-scene.webp")}}),(0,n.jsxs)("div",{className:"".concat(S().card_info," ").concat(P&&S().card_info_carousel),children:[(0,n.jsx)(b,{title:u,moreText:p}),v]})]})]}),(0,n.jsx)("div",{className:S().copyButtonWrapper,children:!P&&m&&D&&(0,n.jsx)(j.A,{messageText:g?m:"".concat(M.origin,"/").concat(m),eventCardName:f||"",isUserMessage:!1})})]});return I?(0,n.jsx)(C.zp,{playOnHover:!0,children:r}):r};return A&&m?(0,n.jsxs)("div",{children:[(0,n.jsx)(r(),{href:g?m:"/".concat(m),target:"_blank",rel:g?"nofollow":void 0,prefetch:!1,children:L()}),!P&&m&&D&&(0,n.jsx)(j.A,{messageText:g?m:"".concat(M.origin,"/").concat(m),eventCardName:f||"",isUserMessage:!1})]}):L()});P.displayName="CustomCard";let N=P},94495:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=i(74848),a=i(96540),o=i(86265),r=i(81441),l=i(55958),s=i.n(l),d=i(4481),c=i(95753);let u=(0,a.memo)(e=>{let{title:t,className:i,onClick:a,...l}=e,{colors:u}=(0,c.o)();return t?(0,n.jsx)("button",{onClick:a,className:(0,r.V)(s().card_button,i),type:"button",...l,children:(0,n.jsxs)("span",{className:s().button_content,children:[t,(0,n.jsx)("div",{className:s().chevron_icon,children:(0,n.jsx)(d.M,{src:o.A,alt:"Chevron right",width:14,height:14,color:u.primary})})]})}):null});u.displayName="CardButton";let p=u},70714:(e,t,i)=>{"use strict";i.d(t,{A:()=>k});var n=i(74848),a=i(96540),o=i(98935),r=i(86715),l=i(93671),s=i(88023);let d=e=>{let{onTranscript:t,onRecordingStop:i,location:n,disabled:d=!1}=e,c=(0,s.A)(),{tAsString:u}=(0,o.Ay)(),{locale:p}=(0,r.useRouter)(),[_,h]=(0,a.useState)(null),[v,m]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(""),C=(0,a.useRef)(!1),w=(0,a.useRef)(""),{transcript:k,resetTranscript:A,browserSupportsSpeechRecognition:S,browserSupportsContinuousListening:P,isMicrophoneAvailable:N}=(0,l.V)(),T=(0,a.useCallback)(e=>{C.current||(C.current=!0,j(e),b(!0))},[]),I=(0,a.useCallback)(()=>{b(!1),setTimeout(()=>{C.current=!1},100)},[]),E=(0,a.useCallback)(()=>{if(l.A.stopListening(),_&&v){let e=Date.now()-_;c({event:"SpeechToTextEnd",data:{location:n||"unknown",locale:p,durationMs:e,durationSeconds:Math.round(e/1e3)}})}h(null),m(!1)},[_,v,c,n,p]),R=(0,a.useCallback)(()=>{if(!C.current){if(d||!S||!N){x(!0),T(u("voiceRecorder.notSupportedAlert"));return}if(v){E();try{let e=window.currentRecognition;e&&e.stop()}catch(e){console.error(e)}}else{A(),w.current="";let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){x(!0),T(u("voiceRecorder.notSupportedAlert"));return}let a=new e;a.continuous=P,a.interimResults=!0,a.language=p||"en-US",a.lang=p||"en-US",window.currentRecognition=a,a.onstart=()=>{m(!0),x(!1)},a.onresult=e=>{let i="",n="";for(let t=e.resultIndex;t<e.results.length;t++){let a=e.results[t][0].transcript;e.results[t].isFinal?n+=a:i+=a}n&&(w.current+=n+" ");let a=w.current+i;a.trim()&&(null==t||t(a.trim()))},a.onerror=e=>{e.error&&!["no-speech","aborted"].includes(e.error)&&(x(!0),T(u("voiceRecorder.notSupportedAlert"))),m(!1),h(null)},a.onend=()=>{if(m(!1),_){let e=Date.now()-_;c({event:"SpeechToTextEnd",data:{location:n||"unknown",locale:p,durationMs:e,durationSeconds:Math.round(e/1e3)}}),null==i||i()}h(null)};try{a.start(),h(Date.now()),c({event:"SpeechToTextStart",data:{location:n||"unknown",locale:p}})}catch(e){x(!0),T(u("voiceRecorder.notSupportedAlert")),h(null)}}}},[d,S,N,v,E,A,P,p,_,t,i,c,n,u,T]),D=(0,a.useCallback)(()=>{A(),w.current="",v&&E()},[A,v,E]);return{isManuallyRecording:v,hasError:g,showAlert:f,alertMessage:y,browserSupportsSpeechRecognition:S,isMicrophoneAvailable:N,startRecording:R,resetRecording:D,handleAlertClose:I,handleLibraryTranscript:(0,a.useCallback)(()=>{k&&!_&&(null==t||t(k))},[k,t,_])}};var c=i(83819),u=i(29965),p=i.n(u),_=i(95753),h=i(50670),v=i.n(h);let m=e=>{let{isRecording:t,disabled:i,onClick:a,className:o="",style:r}=e,{colors:l}=(0,_.o)(),s="".concat(v().waveform," ").concat(t?v().animated:""," ").concat(i?v().disabled:""," ").concat(o);return(0,n.jsx)("div",{className:s,style:r,onClick:a,children:t?Array.from({length:5}).map((e,t)=>(0,n.jsx)("div",{className:v().waveBar,style:{backgroundColor:i?"#ccc":l.primary,opacity:i?.5:1}},t)):(0,n.jsx)(p(),{src:"/microphone-icon.svg",alt:"microphone",width:20,height:20})})};var g=i(98578),x=i.n(g);let f=e=>{let{onClick:t,tooltip:i,isRecording:a,disabled:o,className:r="",style:l,voiceClass:s}=e;return(0,n.jsx)(c.A,{className:"".concat(x().tooltip," ").concat(s),tooltip:i,usePortal:!0,position:"top-center",extraOffset:40,children:(0,n.jsx)(m,{isRecording:a,disabled:o,onClick:t,className:r,style:l})})};var b=i(61947),y=i(78412),j=i(50270),C=i.n(j);let w=e=>{let{showAlert:t,alertMessage:i,onClose:a}=e;return(0,n.jsx)(y.A,{open:t,autoHideDuration:2e3,onClose:a,anchorOrigin:{vertical:"top",horizontal:"center"},className:C().errorSnackbar,children:(0,n.jsx)(b.A,{onClose:a,severity:"error",variant:"filled",className:C().errorAlert,children:i})})},k=e=>{let{onTranscript:t,onRecordingStop:i,className:r="",style:l,disabled:s=!1,onResetRef:c,location:u,voiceClass:p}=e,{tAsString:_}=(0,o.Ay)(),[h,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{v(!0)},[]);let{isManuallyRecording:m,hasError:g,showAlert:x,alertMessage:b,browserSupportsSpeechRecognition:y,isMicrophoneAvailable:j,startRecording:C,resetRecording:k,handleAlertClose:A,handleLibraryTranscript:S}=d({onTranscript:t,onRecordingStop:i,location:u,disabled:s});(0,a.useEffect)(()=>{c&&c(k)},[c,k]),(0,a.useEffect)(()=>{S()},[S]);let P=(0,a.useCallback)(()=>{C()},[C]),N=(0,a.useCallback)(()=>{switch(!0){case!y:return _("voiceRecorder.notSupported");case!j:return _("voiceRecorder.microphoneNotAvailable");case s:return _("voiceRecorder.disabled");case g:return _("voiceRecorder.notSupported");case m:return _("voiceRecorder.stopListening");default:return"HomepageInput"===u?_("voiceRecorder.tapToChat"):_("voiceRecorder.startListening")}},[s,m,y,j,g,_,u]);return h&&y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{onClick:P,tooltip:N(),isRecording:m,disabled:s,className:r,style:l,voiceClass:p}),(0,n.jsx)(w,{showAlert:x,alertMessage:b,onClose:A})]}):null}},61615:(e,t,i)=>{"use strict";i.d(t,{k:()=>eu});var n=i(74848),a=i(29380),o=i(68647),r=i(65193),l=i(36666),s=i(13725),d=i(96540),c=i(66888),u=i(98935),p=i(13368),_=i.n(p);let h=e=>{var t,i,a,o,r,l,s;let d,{destination:p,video:h,justAddObject:v}=e,{tAsString:m}=(0,u.Ay)(),g=(0,c.A)();if(!h||!p)return null;let x=null!==(o=p.displayName)&&void 0!==o?o:p.city;0>(null!=x?x:"").indexOf(",")&&((null==p?void 0:p.parentCity)&&x!==(null==p?void 0:p.parentCity)?x="".concat(x,", ").concat(null==p?void 0:p.parentCity):(null==p?void 0:p.country)&&x!==(null==p?void 0:p.country)&&(x="".concat(x,", ").concat(null==p?void 0:p.country)));let f=null!==(r=null===(t=h.seo)||void 0===t?void 0:t.title)&&void 0!==r?r:m("videoDestinationPage.seo.metaTitle",{destinationName:x,creatorName:null===(i=h.creator)||void 0===i?void 0:i.username}),b=null!==(l=null===(a=h.seo)||void 0===a?void 0:a.description)&&void 0!==l?l:h.caption,y=null!==(s=h.thumbnailUrl)&&void 0!==s?s:h.startThumbnailUrl,j=Math.floor(h.duration),C=Math.floor(j/3600),w=Math.floor(j/60)%60,k=j%60;d=C>0?"PT".concat(C,"H").concat(w,"M").concat(k,"S"):w>0?"PT".concat(w,"M").concat(k,"S"):"PT".concat(k,"S");let A={"@context":"https://schema.org","@type":"VideoObject",name:f,description:b,thumbnailUrl:y,uploadDate:new Date("2024-01-01T00:00:00Z").toISOString(),contentUrl:h.mp4Url,duration:d};return v?(0,n.jsx)(_(),{children:(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(A)}})}):(0,n.jsxs)(_(),{children:[(0,n.jsx)("title",{children:f},"title"),(0,n.jsx)("link",{rel:"canonical",href:g},"canonical"),(0,n.jsx)("meta",{name:"description",content:b},"description"),(0,n.jsx)("meta",{name:"thumbnail",content:y}),(0,n.jsx)("meta",{property:"og:site_name",content:m("homepage.seo.siteName")},"og:site_name"),(0,n.jsx)("meta",{property:"og:type",content:"article"},"og:type"),(0,n.jsx)("meta",{property:"og:title",content:f},"og:title"),(0,n.jsx)("meta",{property:"og:description",content:b},"og:description"),(0,n.jsx)("meta",{httpEquiv:"Cache-Control",content:"max-age=3600, must-revalidate"}),(0,n.jsx)("meta",{httpEquiv:"Expires",content:"3600"}),(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(A)}})]})};var v=i(36909),m=i(41917);let g=e=>{let{onClick:t,styles:i,zIndex:a}=e;return(0,n.jsx)(m.A,{sx:{zIndex:a,width:"48px",height:"48px",borderRadius:"50px",display:"flex",justifyContent:"center",alignItems:"center",minWidth:0,...i},onClick:t,children:(0,n.jsx)(s.A,{src:"/buttons/play-btn.svg",width:14,height:18,alt:"play-btn"})})};var x=i(62403),f=i.n(x),b=i(96610);let y=e=>{let{id:t,onClick:i,customStyles:a="",icon:o,iconAlt:r,iconSize:l=20,title:s}=e;return(0,n.jsxs)("div",{className:f().button,onClick:i,children:[(0,n.jsx)(b.A,{id:"icon-".concat(t),onClick:()=>{},customStyles:a,icon:o,iconAlt:r,iconSize:l}),(0,n.jsx)("div",{className:f().text,children:s})]})};var j=i(3552),C=i(62177),w=i(79640);let k={src:"/_next/static/media/share.533d8238.svg",height:20,width:20,blurWidth:0,blurHeight:0},A={src:"/_next/static/media/compare.8dca951e.svg",height:20,width:21,blurWidth:0,blurHeight:0};var S=i(91106),P=i.n(S),N=i(28097),T=i(77222),I=i(94191),E=i(74033),R=i.n(E),D=i(29306),M=i(89906),L=i(40291),B=i.n(L);let U=e=>{let[t,i]=(0,d.useState)(!0),[n,a]=(0,d.useState)(!0),o=(0,d.useCallback)(()=>{e&&e.scrollPrev()},[e]),r=(0,d.useCallback)(()=>{e&&e.scrollNext()},[e]),l=(0,d.useCallback)(e=>{i(!e.canScrollPrev()),a(!e.canScrollNext())},[]);return(0,d.useEffect)(()=>{e&&(l(e),e.on("reInit",l).on("select",l))},[e,l]),{prevBtnDisabled:t,nextBtnDisabled:n,onPrevButtonClick:o,onNextButtonClick:r}},H=e=>(0,n.jsx)("button",{className:(0,M.A)(B().button,B().button_left,e.className),type:"button",onClick:e.onClick,children:(0,n.jsx)(s.A,{src:"/arrow-back-dark.svg",width:16,height:16,alt:"back-arrow-icon"})}),F=e=>(0,n.jsx)("button",{className:(0,M.A)(B().button,B().button_right,e.className),onClick:e.onClick,type:"button",children:(0,n.jsx)(s.A,{src:"/arrow-back-dark.svg",width:16,height:16,alt:"forward-arrow-icon",style:{transform:"rotate(180deg)"}})});var O=i(64458),W=i.n(O),V=i(70921);let q=e=>{var t,i,r,l;let{destination:c,onClick:u,isVisible:p}=e,_="";c.displayName&&""!==c.displayName?_=c.displayName:c.parentCity&&""!==c.parentCity?_=c.parentCity:c.city&&""!==c.city&&(_=c.city),c.country&&""!==c.country&&(_=""===_?null!==(i=c.country)&&void 0!==i?i:"":"".concat(_,", ").concat(c.country));let h=null!==(r=null==c?void 0:null===(t=c.videos)||void 0===t?void 0:t[0])&&void 0!==r?r:null,v=(0,d.useRef)(null),m="/videos/".concat(null==c?void 0:c.id,"/").concat((0,a.Hg)(c),"/").concat(null==h?void 0:h.id);return(0,n.jsxs)(P(),{className:W().card,onClick:e=>(e.preventDefault(),e.stopPropagation(),u(),!1),href:m,prefetch:!1,children:[p&&(0,n.jsx)(V.W,{videoUrl:(null==h?void 0:h.m3u8Url)||(null==h?void 0:h.mp4Url),poster:null!==(l=null==h?void 0:h.startThumbnailUrl)&&void 0!==l?l:null==h?void 0:h.thumbnailUrl,className:W().card_video,width:100,height:132,autoPlay:!0}),!p&&(0,n.jsx)(o.A,{variant:"rectangular",width:100,height:132}),(0,n.jsxs)("div",{className:W().card_info,ref:v,children:[(0,n.jsx)(s.A,{src:"/DestinationVideoPage/pin.svg",alt:"destination-icon",width:10,height:10}),(0,n.jsx)("span",{className:W().card_info_text,children:_})]})]})};var G=i(13816);let z=e=>{let t,{video:i,destinationId:a,onSimilarDestinationClick:l,cachedSimilarDestinations:s,isVisible:c}=e,[u,p]=(0,r.A)({align:"start"}),_=(0,d.useRef)(null),{prevBtnDisabled:h,nextBtnDisabled:v,onPrevButtonClick:m,onNextButtonClick:g}=U(p),x=(0,D.$X)(),[f,b]=(0,d.useState)(null!=s?s:[]),y=null==i?void 0:i.id;(0,d.useEffect)(()=>{if(!s&&c){if(!y){b([]);return}x(y,a,5).then(e=>{b(e||[])})}},[y,s,a,c]);let j=(0,n.jsx)("div",{className:B().carousel_viewport,ref:e=>{u(e),_.current=e},children:(0,n.jsxs)("div",{className:B().carousel_container,children:[f&&f.length>0&&f.map(e=>(0,n.jsx)(q,{destination:e,onClick:()=>l(e),isVisible:c},e.id)),(!f||f.length<=0)&&[1,2,3].map((e,t)=>(0,n.jsx)(o.A,{animation:"wave",variant:"rounded",sx:{borderRadius:"12px 12px 12px 12px"},width:"100px",height:"132px"},t))]})});return t=c?(0,n.jsx)(G.Af,{strategy:"left",scrollRef:_,isEmbla:!0,children:j}):j,(0,n.jsxs)("section",{className:B().carousel,children:[t,(0,n.jsx)("div",{className:B().carousel_controls,children:(0,n.jsxs)("div",{className:B().carousel_buttons,children:[!h&&(0,n.jsx)(H,{onClick:m,disabled:h}),!v&&(0,n.jsx)(F,{onClick:g,disabled:v})]})})]})},Q=e=>{let{videoCaption:t,locationName:i,onCloseDescription:a,onSimilarDestinationClick:o,onAskLayla:r,video:l,destinationId:s,cachedSimilarDestinations:d,isVisible:c}=e,{tAsString:p}=(0,u.Ay)(),_=[p("videoDestinationPage.description.question1"),p("videoDestinationPage.description.question2"),p("videoDestinationPage.description.question3"),p("videoDestinationPage.description.question4"),p("videoDestinationPage.description.question5")];return(0,n.jsx)("div",{className:R().description,children:(0,n.jsxs)("div",{className:R().container,children:[(0,n.jsxs)("div",{className:R().heading_wrapper,children:[(0,n.jsx)("h2",{className:R().heading,children:i}),(0,n.jsx)(T.A,{position:"right",onClick:a,customStyles:R().close_button})]}),(0,n.jsx)("p",{className:R().caption,children:t}),(0,n.jsx)(I.A,{}),(0,n.jsx)("div",{className:R().title,children:p("videoDestinationPage.description.questionsTitle")}),(0,n.jsx)("div",{className:R().questions,children:_.map((e,t)=>(0,n.jsx)(m.A,{onClick:t=>r(e,t),sx:{width:"fit-content",padding:"8px 14px",borderRadius:"8px",border:"0.5px, solid, #F6F6F6",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFFFFF",boxShadow:"0px 4px 10px 0px rgba(0, 0, 0, 0.08)",color:"#000000",fontSize:"10px",fontWeight:500,lineHeight:"8px",textTransform:"none",letterSpacing:"-0.2px","&:hover":{backgroundColor:"#000000",color:"#FFFFFF"}},children:e},"question-".concat(t)))}),(0,n.jsx)("div",{className:R().title,children:p("videoDestinationPage.description.similarDestinations")}),(0,n.jsx)(z,{video:l,destinationId:s,onSimilarDestinationClick:o,cachedSimilarDestinations:d,isVisible:c})]})},l.id)};var Y=i(43739),J=i.n(Y),Z=i(79551),X=i(18584),K=i(44697),$=i(14280);let ee=(0,j.Ay)(C.A)(e=>{let{theme:t}=e;return{"& .MuiDrawer-paper":{borderRadius:"16px 16px 0 0",backgroundColor:t.palette.background.default}}}),et=()=>{let{tAsString:e}=(0,u.Ay)();return(0,n.jsx)("footer",{className:J().footer,children:(0,n.jsxs)("div",{className:J().footer_main_content,children:[(0,n.jsx)($.A,{width:93}),(0,n.jsx)("p",{className:J().footer__subtitle,children:e("homepage.footer.travelGenius")}),(0,n.jsx)("p",{className:J().footer__rights,children:e("homepage.footer.rights",{year:N.c9.now().year})})]})})},ei=e=>{var t,i,o,r,l;let{playVideo:c,loadVideo:p,loadImage:_,onControlVideo:h,onSimilarDestinationClick:x,video:f,destination:b,location:j,locationName:C,onClose:S,cachedSimilarDestinations:N}=e,{tAsString:T}=(0,u.Ay)(),{isMobile:I}=(0,X.U)(),{addVideoToChat:E}=(0,w.Y)(),[R,D]=(0,d.useState)(_),[M,L]=(0,d.useState)(p),[B,U]=(0,d.useState)(!1),[H,F]=(0,d.useState)(!1),O=(0,d.useRef)(null);(0,d.useEffect)(()=>{_&&!R&&D(!0)},[_,R]),(0,d.useEffect)(()=>{p&&!M&&L(!0)},[p,M]);let W=()=>{U(!0)},V=()=>{U(!1)},q=(e,t)=>{let i=T("videoDestinationPage.video.buildTripQuestion");E(e.id,i),I&&(null==S||S(t))},G=(e,t,i)=>{E(e.id,t),I&&(null==S||S(i))},z=(0,d.useCallback)(()=>{let e="".concat(window.location.origin,"/videos/").concat(null==b?void 0:b.id,"/").concat((0,a.Hg)(b),"/").concat(null==f?void 0:f.id);navigator.clipboard.writeText(e),F(!0)},[null==b?void 0:b.id]),Y=!B||I;return(0,n.jsxs)("div",{className:J().slide,ref:O,children:[Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:J().video_gradient}),j&&(0,n.jsxs)("div",{className:J().video_info,children:[(0,n.jsxs)("div",{className:J().location_wrapper,children:[(0,n.jsx)(v.A,{width:14,height:14,fillColor:"#fff"}),(0,n.jsx)(P(),{href:"/destination/".concat(null==b?void 0:b.id),target:"_blank",rel:"nofollow",prefetch:!1,children:(0,n.jsx)("h2",{children:C})})]}),(M||R)&&(0,n.jsx)(Z.A,{video:f}),(0,n.jsx)("p",{className:J().caption,children:null==f?void 0:f.caption}),(0,n.jsx)(m.A,{onClick:W,sx:{width:"fit-content",padding:"8px 16px",borderRadius:"30px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"12px",fontWeight:500,lineHeight:"12px",textTransform:"none","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:T("videoDestinationPage.video.learnMore")}),(0,n.jsx)(m.A,{onClick:e=>q(f,e),sx:{width:"100%",padding:"16px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--colors-primary)",color:"#fff",fontSize:"14px",fontWeight:600,lineHeight:"14px",textTransform:"none",letterSpacing:"-0.28px","&:hover":{backgroundColor:"rgba(var(--colors-primaryRGB), 0.8)"}},children:T("videoDestinationPage.video.buildTrip")})]}),!c&&(0,n.jsx)(g,{zIndex:1,onClick:h,styles:{backgroundColor:"rgba(255, 255, 255, 0.4)",position:"absolute",top:"50%",left:"50%",zIndex:3,transition:"all 0.3s",transform:"translate(-50%, -50%)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)",transform:"translate(-50%, -50%) scale(1.1)"}}}),(0,n.jsx)("div",{className:J().video_image,children:(M||R)&&(0,n.jsx)(K.HLSVideoPlayer,{id:f.id,videoUrl:null!==(o=null==f?void 0:f.m3u8Url)&&void 0!==o?o:null==f?void 0:f.mp4Url,className:J().video,autoPlay:c&&p,poster:null==f?void 0:f.thumbnailUrl,video:f})})]}),(0,n.jsxs)("div",{className:J().video_description,children:[I&&(0,n.jsxs)(ee,{anchor:"bottom",open:B,onClose:()=>U(!1),onOpen:()=>U(!0),children:[(0,n.jsx)(s.A,{src:"/VideoDestination/drawer_swipe_dash.svg",alt:"drawable-swipe-icon",width:40,height:4,className:J().drawer_swipe_icon}),(0,n.jsx)(Q,{locationName:C,videoCaption:f.caption,onCloseDescription:V,onSimilarDestinationClick:x,onAskLayla:(e,t)=>G(f,e,t),video:f,destinationId:null!==(r=null==b?void 0:null===(t=b.id)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",cachedSimilarDestinations:N,isVisible:B}),(0,n.jsx)(et,{})]}),!I&&(0,n.jsx)(Q,{locationName:C,videoCaption:f.caption,onCloseDescription:V,onSimilarDestinationClick:x,onAskLayla:(e,t)=>G(f,e,t),video:f,destinationId:null!==(l=null==b?void 0:null===(i=b.id)||void 0===i?void 0:i.toString())&&void 0!==l?l:"",cachedSimilarDestinations:N,isVisible:B})]},"video_info_".concat(f.id)),(0,n.jsxs)("div",{className:J().video_buttons,children:[(0,n.jsx)(y,{id:"video_share_".concat(f.id),icon:k,iconAlt:"share-icon",title:H?T("videoDestinationPage.buttons.copied"):T("videoDestinationPage.buttons.share"),onClick:z,customStyles:J().video_button}),(0,n.jsx)(y,{id:"video_compare_".concat(f.id),icon:A,iconAlt:"compare-icon",title:T("videoDestinationPage.buttons.compare"),onClick:()=>{W()},customStyles:J().video_button})]})]},f.id)};var en=i(97647),ea=i.n(en),eo=i(86715),er=i(54252),el=i(89599);let es=e=>{var t,i,c;let{onClose:u,onSimilarDestination:p,location:_,destination:v,videoId:m,cachedSimilarDestinations:g}=e,{locale:x}=(0,eo.useRouter)(),{updateLocation:f}=(0,X.U)(),b=(0,d.useMemo)(()=>null==v?void 0:v.videos,[null==v?void 0:v.id,null==v?void 0:v.videos]),y=Math.max(0,null!==(i=null==b?void 0:b.findIndex(e=>e.id===m))&&void 0!==i?i:0),[j,C]=(0,r.A)({axis:"y",align:"center",containScroll:!1,skipSnaps:!0,startIndex:y>0?y:0},[(0,l.J)()]),[w,k]=(0,d.useState)(y),[A,S]=(0,d.useState)(!0),P=(0,d.useRef)(null),N=(0,d.useCallback)(e=>{var t,i;if(!e||!b||0===b.length)return;let n=e.selectedScrollSnap();if(-1===n||n>=b.length)return;k(n);let o=window.location.pathname;if(!o.startsWith("/chat"))return;let r=o.split("/").slice(0,3);x&&r.push(x),r.push("videos"),r.push(null!==(i=null===(t=v.id)||void 0===t?void 0:t.toString())&&void 0!==i?i:"1234"),r.push((0,a.Hg)(v)),r.push(b[n].id);let l=r.join("/");(0,el.Uo)(l),null==f||f(l)},[v.id,b,x]);(0,d.useEffect)(()=>{if(C)return C.on("settle",N),N(C),()=>{C.off("settle",N)}},[C,N]);let T=()=>{S(e=>!e)},I=(null==v?void 0:v.parentCity)&&(null==v?void 0:v.country)?(0,er.l)(v.parentCity,v.country,v.countryCode||""):null!==(c=null==v?void 0:v.displayName)&&void 0!==c?c:"";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{destination:v,video:null==b?void 0:b[w]}),(0,n.jsxs)("div",{className:ea().slider_wrapper,children:[(0,n.jsx)(s.A,{src:null==b?void 0:null===(t=b[w])||void 0===t?void 0:t.thumbnailUrl,alt:"video-background",fill:!0,className:ea().video_background}),(0,n.jsx)("div",{id:"itinerary_videos_slider",className:ea().slider_container,children:(0,n.jsx)(G.Af,{strategy:"center",scrollRef:P,isEmbla:!0,children:(0,n.jsx)("div",{className:ea().embla_viewport,ref:e=>{j(e),P.current=e},children:(0,n.jsxs)("div",{className:ea().embla_container,children:[!!(null==b?void 0:b.length)&&b.map((e,t)=>(0,n.jsx)(ei,{playVideo:A,loadVideo:w===t,loadImage:2>Math.abs(w-t),onControlVideo:T,onSimilarDestinationClick:p,onClose:u,video:e,destination:v,location:_,locationName:I,cachedSimilarDestinations:e.id!==m&&(m||0!==t)?void 0:g},e.id)),!(null==b?void 0:b.length)&&[1,2,3,4,5].map((e,t)=>(0,n.jsx)(o.A,{animation:"wave",variant:"rounded",sx:{borderRadius:"12px 12px 12px 12px"},width:"100%",height:"100%"},t))]})})})})]},v.id)]})};var ed=i(35137),ec=i.n(ed);let eu=e=>{var t;let{destination:i,videoId:a,cachedSimilarDestinations:o,onItemSelect:r,onClose:l}=e,s=null!==(t=null==i?void 0:i.displayName)&&void 0!==t?t:"";return 0>s.indexOf(",")&&((null==i?void 0:i.parentCity)&&s!==(null==i?void 0:i.parentCity)?s="".concat(s,", ").concat(null==i?void 0:i.parentCity):(null==i?void 0:i.country)&&s!==(null==i?void 0:i.country)&&(s="".concat(s,", ").concat(null==i?void 0:i.country))),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:ec().topbar,children:[(0,n.jsx)(T.A,{onClick:l,position:"left"}),i&&(0,n.jsx)("span",{className:ec().title,children:"".concat(s)})]}),(0,n.jsx)("div",{className:ec().container,children:i&&(0,n.jsx)(es,{location:"".concat(i.city,", ").concat(i.country),onSimilarDestination:e=>null==r?void 0:r(e),onClose:l,destination:i,videoId:a||void 0,cachedSimilarDestinations:o})})]})}},64812:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(74848);i(96540);var a=i(55947),o=i(18584);let r=e=>{let{children:t,className:i,content:r,side:l,showInMobile:s=!1}=e,{isMobile:d}=(0,o.U)();return d&&!s?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(a.Bc,{children:(0,n.jsxs)(a.m_,{children:[(0,n.jsx)(a.k$,{asChild:!0,children:t}),(0,n.jsx)(a.ZI,{className:i,side:l,children:r})]})})}},75329:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r,f:()=>l});var n=i(74848),a=i(96540);let o=(0,a.createContext)({}),r=()=>(0,a.useContext)(o),l=e=>{let{children:t}=e,[i,r]=(0,a.useState)(new Map),[l,s]=(0,a.useState)(new Map),[d,c]=(0,a.useState)(new Map),[u,p]=(0,a.useState)(new Map);return(0,n.jsx)(o.Provider,{value:{getItineraryCacheData:e=>i.get(e),setItineraryCacheData:(e,t)=>{i.set(e,t),r(new Map(i))},getItineraryQueryCacheData:e=>l.get(e),setItineraryQueryCacheData:(e,t)=>{l.set(e,t),s(new Map(l))},getDestinationCacheData:e=>d.get(e),setDestinationCacheData:(e,t)=>{d.set(e,t),c(new Map(d))},getDestinationQueryCacheData:e=>u.get(e),setDestinationQueryCacheData:(e,t)=>{u.set(e,t),p(new Map(u))}},children:t})}},38856:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>s});var n=i(96540),a=i(13050),o=i(98935),r=i(88023);let l=["image/jpeg","image/jpg","image/png","image/webp","image/gif","image/bmp","image/svg+xml","application/pdf","text/plain","application/rtf","text/rtf"];function s(){let{tAsString:e}=(0,o.Ay)(),t=(0,r.A)();return{triggerFileUpload:(0,n.useCallback)(i=>{let{onFileSelected:n,eventName:o="FileUploadAttempt",eventData:r={},maxSizeBytes:s=0xa00000,allowedTypes:d=l,chatId:c}=i,u=document.createElement("input");u.type="file",u.style.display="none",u.accept=d.join(","),u.onchange=i=>{var l;let u=null===(l=i.target.files)||void 0===l?void 0:l[0];if(u){if(!d.includes(u.type)){(0,a.N)(e("paywall.toasts.reactivate.generalError"));return}if(u.size>s){(0,a.N)(e("chatPage.input.fileTooLarge"));return}t({event:o,data:{chatId:c,fileName:u.name,fileType:u.type,fileSize:u.size,...r}}),n(u)}},document.body.appendChild(u),u.click(),document.body.removeChild(u)},[t,e]),DEFAULT_ALLOWED_TYPES:l,DEFAULT_MAX_SIZE:0xa00000}}},8305:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(96540);let a=()=>{let[e,t]=(0,n.useState)(!1),[i,a]=(0,n.useState)("Loading...");return{isLoading:e,showLoader:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";a(e),t(!0)},hideLoader:()=>{t(!1)},loaderText:i}}},94191:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var n=i(98587),a=i(58168),o=i(96540),r=i(34164),l=i(75659),s=i(771),d=i(3552),c=i(98301),u=i(9307),p=i(74848);let _=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],h=e=>{let{absolute:t,children:i,classes:n,flexItem:a,light:o,orientation:r,textAlign:s,variant:d}=e;return(0,l.A)({root:["root",t&&"absolute",d,o&&"light","vertical"===r&&"vertical",a&&"flexItem",i&&"withChildren",i&&"vertical"===r&&"withChildrenVertical","right"===s&&"vertical"!==r&&"textAlignRight","left"===s&&"vertical"!==r&&"textAlignLeft"],wrapper:["wrapper","vertical"===r&&"wrapperVertical"]},u.K,n)},v=(0,d.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.absolute&&t.absolute,t[i.variant],i.light&&t.light,"vertical"===i.orientation&&t.vertical,i.flexItem&&t.flexItem,i.children&&t.withChildren,i.children&&"vertical"===i.orientation&&t.withChildrenVertical,"right"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignRight,"left"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignLeft]}})(e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},i.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},i.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,s.X4)(t.palette.divider,.08)},"inset"===i.variant&&{marginLeft:72},"middle"===i.variant&&"horizontal"===i.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===i.variant&&"vertical"===i.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===i.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},i.flexItem&&{alignSelf:"stretch",height:"auto"})},e=>{let{ownerState:t}=e;return(0,a.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})},e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({},i.children&&"vertical"!==i.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}})},e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({},i.children&&"vertical"===i.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}})},e=>{let{ownerState:t}=e;return(0,a.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})}),m=(0,d.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.wrapper,"vertical"===i.orientation&&t.wrapperVertical]}})(e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===i.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})}),g=o.forwardRef(function(e,t){let i=(0,c.b)({props:e,name:"MuiDivider"}),{absolute:o=!1,children:l,className:s,component:d=l?"div":"hr",flexItem:u=!1,light:g=!1,orientation:x="horizontal",role:f="hr"!==d?"separator":void 0,textAlign:b="center",variant:y="fullWidth"}=i,j=(0,n.A)(i,_),C=(0,a.A)({},i,{absolute:o,component:d,flexItem:u,light:g,orientation:x,role:f,textAlign:b,variant:y}),w=h(C);return(0,p.jsx)(v,(0,a.A)({as:d,className:(0,r.A)(w.root,s),role:f,ref:t,ownerState:C},j,{children:l?(0,p.jsx)(m,{className:w.wrapper,ownerState:C,children:l}):null}))});g.muiSkipListHighlight=!0;let x=g},52813:(e,t,i)=>{"use strict";i.d(t,{V:()=>a,b:()=>n});let n=1e4,a=5e3},13050:(e,t,i)=>{"use strict";i.d(t,{N:()=>r});var n=i(74848),a=i(61409);let o=e=>{a.oR.info(e,{position:"bottom-center",style:{width:"100%"},transition:a.q7,hideProgressBar:!0,autoClose:4e3})},r=e=>{o(l(e))},l=e=>(0,n.jsx)("div",{style:{display:"flex",alignItems:"flex-start",backgroundColor:"#CF0000",padding:"10px",borderRadius:"5px",color:"#FFF",width:"100%"},children:e})},14770:e=>{e.exports={style:{fontFamily:"'laylaIcon', 'laylaIcon Fallback'"},className:"__className_e5027a"}},29284:e=>{e.exports={container:"ChatFeedback_container__qUag9",feedback:"ChatFeedback_feedback__xoR01"}},83150:e=>{e.exports={chatSection__chat_snapshot:"ChatMessages_chatSection__chat_snapshot__XFEiN",chatSection_inner_container:"ChatMessages_chatSection_inner_container__sEEp3",trial_button:"ChatMessages_trial_button__gSZGj"}},38229:e=>{e.exports={wrapper:"CopyShareMessage_wrapper__DdCox",user_message:"CopyShareMessage_user_message__ZxiiK",copy_button:"CopyShareMessage_copy_button__L4BgZ",copied:"CopyShareMessage_copied__PSoJQ",button_text:"CopyShareMessage_button_text__7jgPP",tooltip_container:"CopyShareMessage_tooltip_container__6ozWG",more_space:"CopyShareMessage_more_space__u9GSt"}},73615:e=>{e.exports={book_trip_button:"SubGreetingMessage_book_trip_button__G4I9Q"}},32156:e=>{e.exports={chat_container:"ChatSkeleton_chat_container__eWbb4",chat_head:"ChatSkeleton_chat_head__f_NO6",chat:"ChatSkeleton_chat__DFzfl",chat_bottom:"ChatSkeleton_chat_bottom__70vjF",chat_bottom_options:"ChatSkeleton_chat_bottom_options__hHLZ_",chat_messages:"ChatSkeleton_chat_messages__f8miO"}},49512:e=>{e.exports={gridContainer:"InitialQuickReplies_gridContainer__pn2WG"}},53595:e=>{e.exports={tile:"InitialQuickReplyTile_tile__WIklQ",title:"InitialQuickReplyTile_title__T73tl",text:"InitialQuickReplyTile_text__VR0De",icon:"InitialQuickReplyTile_icon__kl6cs",tile_mobile:"InitialQuickReplyTile_tile_mobile__kHE73"}},74812:e=>{e.exports={menuContainer:"TripMenuButtons_menuContainer__r8im8",buttons_container:"TripMenuButtons_buttons_container__nrprv",pdf_wrapper:"TripMenuButtons_pdf_wrapper__5EXT4",trip_pdf_button:"TripMenuButtons_trip_pdf_button___x9SQ",pdf_wrapper_download:"TripMenuButtons_pdf_wrapper_download__S0g7s",portalTooltip:"TripMenuButtons_portalTooltip__Pxvtj",share_button:"TripMenuButtons_share_button__XFTs_",basket_button:"TripMenuButtons_basket_button__v2NkF",modify_trip_button:"TripMenuButtons_modify_trip_button__wuWiZ"}},11892:e=>{e.exports={container:"TripplannerCard_container__MCxW6",wrapper:"TripplannerCard_wrapper__2lcCT",close_button:"TripplannerCard_close_button__NGjTn",block_images:"TripplannerCard_block_images__3_fIv",block_text:"TripplannerCard_block_text__HA_xJ",title:"TripplannerCard_title__97pMy",titleSpan:"TripplannerCard_titleSpan__9X20v",description:"TripplannerCard_description__phB_q"}},91015:e=>{e.exports={typing_container:"TypingIndicator_typing_container__R5EOO",typing_text:"TypingIndicator_typing_text__LPR0d"}},16274:e=>{e.exports={container:"ChatSidePanelContent_container__k8HpT",container_trip:"ChatSidePanelContent_container_trip__kxGY6",close_button_mobile_position:"ChatSidePanelContent_close_button_mobile_position___wJxQ",header_component:"ChatSidePanelContent_header_component__VYxvl",trip_header_component:"ChatSidePanelContent_trip_header_component__sxmR_",trip_buttons_container:"ChatSidePanelContent_trip_buttons_container__I2PlK",trip_close_button:"ChatSidePanelContent_trip_close_button__PlruP",trip_header_wrapper:"ChatSidePanelContent_trip_header_wrapper__yDWlW",trip_close_button_container:"ChatSidePanelContent_trip_close_button_container__5vHrt",trip_header_content:"ChatSidePanelContent_trip_header_content__ivKSh",content_wrapper_trip_creator:"ChatSidePanelContent_content_wrapper_trip_creator__13P1H",content_wrapper:"ChatSidePanelContent_content_wrapper__uAjM5",content_wrapper_below_header:"ChatSidePanelContent_content_wrapper_below_header__OLlVt"}},10788:e=>{e.exports={container:"TripActionsHeader_container__oJLUE",actions_container:"TripActionsHeader_actions_container__z_lN0",edit_trip_button:"TripActionsHeader_edit_trip_button__tYzKB",title_and_details:"TripActionsHeader_title_and_details__X5Et6",title_content_title:"TripActionsHeader_title_content_title__fyKFK",trip_details_button:"TripActionsHeader_trip_details_button__WGbFA",dots:"TripActionsHeader_dots__Lyk3H","scroll-hide-header":"TripActionsHeader_scroll-hide-header__D9Pll"}},34896:e=>{e.exports={side_panel_container:"ChatSidePanelSkeleton_side_panel_container__ZVjrW",component_header:"ChatSidePanelSkeleton_component_header__gnvEp",component_header_top:"ChatSidePanelSkeleton_component_header_top__byyd8",component_header_bottom:"ChatSidePanelSkeleton_component_header_bottom__FI20z",component_content:"ChatSidePanelSkeleton_component_content__wMQ9z",component_content_days:"ChatSidePanelSkeleton_component_content_days__qZ7pW",component_content_main:"ChatSidePanelSkeleton_component_content_main__5I7Er",content_part:"ChatSidePanelSkeleton_content_part__hro3H"}},84774:e=>{e.exports={container:"ChatSidePanelContent_container__XA_JO",container_trip:"ChatSidePanelContent_container_trip__3R22x",close_button_mobile_position:"ChatSidePanelContent_close_button_mobile_position__aHufT",header_component:"ChatSidePanelContent_header_component__uL2nm",trip_header_component:"ChatSidePanelContent_trip_header_component__PQcUb",trip_buttons_container:"ChatSidePanelContent_trip_buttons_container__bHuf7",trip_close_button:"ChatSidePanelContent_trip_close_button__IuGBf",content_wrapper:"ChatSidePanelContent_content_wrapper__4zyH9",content_wrapper_trip:"ChatSidePanelContent_content_wrapper_trip__GmB_i",content_wrapper_below_header:"ChatSidePanelContent_content_wrapper_below_header__Ptbiy"}},24584:e=>{e.exports={container:"TripActionsHeader_container__jjMVE",actions_container:"TripActionsHeader_actions_container__2isNI",edit_trip_button:"TripActionsHeader_edit_trip_button__wWCv5",title_and_details:"TripActionsHeader_title_and_details__6ZCJj",title_content_title:"TripActionsHeader_title_content_title__EQHcP",trip_details_button:"TripActionsHeader_trip_details_button__O_62m",dots:"TripActionsHeader_dots__69Hwk","scroll-hide-header":"TripActionsHeader_scroll-hide-header__2QN4B"}},64458:e=>{e.exports={card:"SimilarDestinationCard_card__cS8SB",card_video:"SimilarDestinationCard_card_video__05pAp",card_info:"SimilarDestinationCard_card_info__ffq_g",card_info_text:"SimilarDestinationCard_card_info_text__rUETt"}},40291:e=>{e.exports={carousel:"SimilarDestinationsCarousel_carousel__H10UR",carousel_viewport:"SimilarDestinationsCarousel_carousel_viewport__TY2lF",carousel_container:"SimilarDestinationsCarousel_carousel_container__25_4u",carousel_controls:"SimilarDestinationsCarousel_carousel_controls___8sA3",carousel_buttons:"SimilarDestinationsCarousel_carousel_buttons__GZAw7",button:"SimilarDestinationsCarousel_button__mNP7s",button_left:"SimilarDestinationsCarousel_button_left__gawvp",button_right:"SimilarDestinationsCarousel_button_right__kzg3e"}},74033:e=>{e.exports={description:"VideoDescription_description__OfbAy",container:"VideoDescription_container__lkbO5",heading_wrapper:"VideoDescription_heading_wrapper__IM77c",heading:"VideoDescription_heading__dy1NX",caption:"VideoDescription_caption__kY4YF",close_button:"VideoDescription_close_button__3k67Y",questions:"VideoDescription_questions__7h1O3",title:"VideoDescription_title__kQUTE"}},43739:e=>{e.exports={slide:"VideoSlide_slide__LJXhi",video_image:"VideoSlide_video_image__D_UNU",video:"VideoSlide_video__q3L8W",video_gradient:"VideoSlide_video_gradient__TUB6F",video_description:"VideoSlide_video_description__1yn3L",video_info:"VideoSlide_video_info__cQnW4",location_wrapper:"VideoSlide_location_wrapper__5Zpf3",caption:"VideoSlide_caption__rIbKC",drawer_swipe_icon:"VideoSlide_drawer_swipe_icon__k6HUX",footer:"VideoSlide_footer__750O3",footer_main_content:"VideoSlide_footer_main_content__RBqt1",footer__subtitle:"VideoSlide_footer__subtitle__9gGrn",footer__rights:"VideoSlide_footer__rights__wDskh",video_buttons:"VideoSlide_video_buttons__aLRgP",video_button:"VideoSlide_video_button__kn9Bg"}},97647:e=>{e.exports={video_background:"VideosCarousel_video_background__9RuL_",slider_container:"VideosCarousel_slider_container__UL7n0",embla_viewport:"VideosCarousel_embla_viewport__DOED9",embla_container:"VideosCarousel_embla_container__dsJiz",slider_wrapper:"VideosCarousel_slider_wrapper__Aysnu","slick-slider":"VideosCarousel_slick-slider__kcEqS","slick-track":"VideosCarousel_slick-track__qlUsh"}},63664:e=>{e.exports={container:"ChatLayout_container__MbNjB",chat_section_is_trip:"ChatLayout_chat_section_is_trip__lQhAg",chat_section_expanded:"ChatLayout_chat_section_expanded__ePBvo",isRightPanelExpandedWithoutTrip:"ChatLayout_isRightPanelExpandedWithoutTrip__wc8XZ",chat_container:"ChatLayout_chat_container__eefJA",scroll:"ChatLayout_scroll__Jv_Mo",isScroll:"ChatLayout_isScroll__HX8Ej",isNotScroll:"ChatLayout_isNotScroll__W4vzB",layout_right_sidebar:"ChatLayout_layout_right_sidebar__j1uII",layout_right_sidebar_show:"ChatLayout_layout_right_sidebar_show__Puyf5",layout_right_sidebar_not_expanded_not_trip:"ChatLayout_layout_right_sidebar_not_expanded_not_trip__tfbQ_",show_paywall:"ChatLayout_show_paywall__Q6pkf",not_animated_page:"ChatLayout_not_animated_page__62nuA",containerFixed:"ChatLayout_containerFixed__xFCiI",mobile_hidden:"ChatLayout_mobile_hidden__aJBUi",layout_right_sidebar_v2:"ChatLayout_layout_right_sidebar_v2__ejGQC",expandHeight:"ChatLayout_expandHeight__ORW4m"}},1141:e=>{e.exports={card_container:"DestinationCard_card_container__Hg_ZP"}},42233:e=>{e.exports={container:"TripCard_container__0sqCO",learnMoreLink:"TripCard_learnMoreLink__qyUhe"}},9426:e=>{e.exports={message_wrapper:"Message_message_wrapper__C3tNz",message_wrapper_user:"Message_message_wrapper_user__bpkh1",message_wrapper_assistant:"Message_message_wrapper_assistant__OmMu_",message_wrapper_last:"Message_message_wrapper_last__XqfWP",message:"Message_message__wiulC",message_assistant:"Message_message_assistant__k803x",message_user:"Message_message_user__J31SS",message_user_dark:"Message_message_user_dark__Go9Tb",transparent_background:"Message_transparent_background__sYu_d",user_message:"Message_user_message__OHt85",copyButtonWrapper:"Message_copyButtonWrapper__hnLRo",last_message:"Message_last_message__IKGCH"}},19785:e=>{e.exports={button:"CommandButton_button__4pIwx",color_button:"CommandButton_color_button__JN0ll"}},6811:e=>{e.exports={button:"DownloadTripPdfCommand_button__ZO44F",trip_pdf_button:"DownloadTripPdfCommand_trip_pdf_button__NY0GP"}},28670:e=>{e.exports={book_trip_button:"CheckoutTripButton_book_trip_button__gAaKB",loader:"CheckoutTripButton_loader__LzvrG",spin:"CheckoutTripButton_spin__Z_Ijs"}},26921:e=>{e.exports={icon_button:"CircularIconButton_icon_button__0Qzut"}},62403:e=>{e.exports={button:"CircularIconTextButton_button__SiANA",text:"CircularIconTextButton_text__pumkh"}},60130:e=>{e.exports={card_container:"Card_card_container__H1PxN",card:"Card_card__xrnK0",card_content:"Card_card_content__SJbks",card__front_image:"Card_card__front_image___Ha_s",card_info:"Card_card_info__qwpSM",card_info_carousel:"Card_card_info_carousel__llgUu",copyButtonWrapper:"Card_copyButtonWrapper__Sf6GZ"}},55958:e=>{e.exports={card_button:"CardButton_card_button__b_fwZ",button_content:"CardButton_button_content__h32_g",chevron_icon:"CardButton_chevron_icon__jzSBj"}},8024:e=>{e.exports={card_tag:"CardTag_card_tag__mofC5"}},97180:e=>{e.exports={card_title:"CardTitle_card_title__MrksO",card_title_more_text:"CardTitle_card_title_more_text__8aeDt"}},88130:e=>{e.exports={card_type:"CardType_card_type__bBLlP",card_type_icon:"CardType_card_type_icon__9ZuuP",card_type_text:"CardType_card_type_text__ZvBBE"}},34480:e=>{e.exports={iconFamily:"Icons_iconFamily__So_VX",iconWeekend:"Icons_iconWeekend__dkC8A",iconNewYears:"Icons_iconNewYears__Wk_Fj",iconCouple:"Icons_iconCouple__KZMfB",iconBucketlist:"Icons_iconBucketlist__Y2SLY",iconBeach:"Icons_iconBeach__nDptv",iconBusTrain:"Icons_iconBusTrain__YrKyD",iconChristmas:"Icons_iconChristmas__OLjpm",iconForYou:"Icons_iconForYou__L0AGC",iconFriends:"Icons_iconFriends__a_qC8",iconMultiCity:"Icons_iconMultiCity__ub9tO",iconFlight:"Icons_iconFlight__ew29Y",iconItinerary:"Icons_iconItinerary__JJVEG",iconInspire:"Icons_iconInspire__64ny_",iconHotel:"Icons_iconHotel__ZD_aC",icon__active:"Icons_icon__active__PNcks"}},41696:e=>{e.exports={input_container:"PromptInput_input_container__dJ_Xa",input_and_button:"PromptInput_input_and_button__A2Pa9",input:"PromptInput_input__S3JPW",send_button_container:"PromptInput_send_button_container__L8O10",send_button:"PromptInput_send_button__9Eo2G",button_wrapper_shadow:"PromptInput_button_wrapper_shadow__IBmSd",lockedOverlay:"PromptInput_lockedOverlay__WeQt2",unlockButton:"PromptInput_unlockButton__J_6Vs",unlockButtonAsText:"PromptInput_unlockButtonAsText__W_ROz",quick_replies_container:"PromptInput_quick_replies_container__uPyuE",quick_reply_button:"PromptInput_quick_reply_button__Yslcc",protected_input:"PromptInput_protected_input__vhrLt",protected_textarea:"PromptInput_protected_textarea___ZhxR",locked_img:"PromptInput_locked_img__tdVHC",blink:"PromptInput_blink__6IdfI",spin:"PromptInput_spin__Z_kjQ"}},48928:e=>{e.exports={quick_replies_container_wrapper:"QuickReplies_quick_replies_container_wrapper__7MzZM",quick_replies_container_chat_page:"QuickReplies_quick_replies_container_chat_page__XKb6k",scrolled:"QuickReplies_scrolled__gck7l",quick_reply_button:"QuickReplies_quick_reply_button__qyxCp"}},98578:e=>{e.exports={tooltip:"VoiceButton_tooltip__WL29p"}},50270:e=>{e.exports={errorSnackbar:"VoiceErrorAlert_errorSnackbar__Xfv2M",errorAlert:"VoiceErrorAlert_errorAlert__eo6IT"}},50670:e=>{e.exports={waveform:"WaveformDisplay_waveform__CAcqr",animated:"WaveformDisplay_animated__zyJqU",disabled:"WaveformDisplay_disabled__RzeW8",waveBar:"WaveformDisplay_waveBar__oKpMk","waves-outer":"WaveformDisplay_waves-outer__Ge4kB","waves-mid":"WaveformDisplay_waves-mid__k8kU5","waves-center":"WaveformDisplay_waves-center__ohMQC"}},35137:e=>{e.exports={container:"ItineraryVideosPopup_container__9eVSH",title:"ItineraryVideosPopup_title__HqWxJ",topbar:"ItineraryVideosPopup_topbar__i8H1G"}},38520:e=>{e.exports={header:"ActionDialog_header__RRnOm",content:"ActionDialog_content__q77of",message:"ActionDialog_message__ZoaXq",footer:"ActionDialog_footer__vN8UG"}},85859:(e,t,i)=>{"use strict";i.d(t,{Cf:()=>_,Es:()=>v,HM:()=>u,L3:()=>m,LC:()=>p,ZJ:()=>c,c7:()=>h,lG:()=>s,rr:()=>g,zM:()=>d});var n=i(31170),a=i(96540),o=i(60990),r=i(76897),l=i(74848);function s({...e}){return(0,l.jsx)(o.bL,{"data-slot":"dialog",...e})}function d({...e}){return(0,l.jsx)(o.l9,{"data-slot":"dialog-trigger",...e})}function c({...e}){return(0,l.jsx)(o.ZL,{"data-slot":"dialog-portal",...e})}function u({...e}){return(0,l.jsx)(o.bm,{"data-slot":"dialog-close",...e})}function p({className:e,...t}){return(0,l.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function _({className:e,children:t,showCloseButton:i=!0,...a}){return(0,l.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,l.jsx)(p,{}),(0,l.jsxs)(o.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a,children:[t,i&&(0,l.jsxs)(o.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,l.jsx)(r.A,{}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}s.displayName="Dialog",d.displayName="DialogTrigger",c.displayName="DialogPortal",u.displayName="DialogClose",p.displayName="DialogOverlay",_.displayName="DialogContent";var h=a.forwardRef(({className:e,...t},i)=>(0,l.jsx)("div",{ref:i,"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t}));h.displayName="DialogHeader";var v=a.forwardRef(({className:e,...t},i)=>(0,l.jsx)("div",{ref:i,"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t}));function m({className:e,...t}){return(0,l.jsx)(o.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",e),...t})}function g({className:e,...t}){return(0,l.jsx)(o.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}v.displayName="DialogFooter",m.displayName="DialogTitle",g.displayName="DialogDescription"}}]);